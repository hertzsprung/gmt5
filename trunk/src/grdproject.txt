#include "common_options.txt"
.TH GRDPROJECT 1 MANDATE GMT_STRING "Generic Mapping Tools"
.SH NAME
grdproject \- Forward and Inverse map transformation of 2-D grid files 
.SH SYNOPSIS
BD(grdproject) IT(in_grdfile) OPT(G)IT(out_grdfile) GMT_J_OPT
[ OPT(A)[BD(c|i|p|e|f|k|M|n)] ] [ OPT(C)[IT(dx/dy)] ] [ OPT(D)GMT_inc_OPT ] 
[ OPT(E)IT(dpi) ] [ OPT(I) ] [ OPT(Mc)|BD(i)|BD(p) ] [ GMT_Rgeo_OPT ]
[ GMT_V_OPT ] [ GMT_n_OPT ] [ GMT_r_OPT ]
.SH DESCRIPTION
BD(grdproject) will do one of two things depending whether OPT(I) has been set.  If set, it
will transform a gridded data set from a rectangular coordinate system onto a geographical
system by resampling the surface at the new nodes.  If not set, it will project a geographical
gridded data set onto a rectangular grid.  To obtain the value at each new node, its location
is inversely projected back onto the input grid after which a value is interpolated between the
surrounding input grid values. By default bi-cubic interpolation is used.
Aliasing is avoided by also forward projecting the input grid nodes. If two or more nodes are
projected onto the same new node, their average will dominate in the calculation of the new
node value. Interpolation and aliasing is controlled with the OPT(n) option.
The new node spacing may be determined in one of several ways by specifying the grid spacing,
number of nodes, or resolution.  Nodes not constrained by input data are set to NaN.
.br
The OPT(R) option can be used to select a map region larger or smaller than that
implied by the extent of the grid file.
#include "explain_commonitems.txt"
.SH REQUIRED ARGUMENTS
.TP
IT(in_grdfile)
2-D binary grid file to be transformed.
(See GRID FILE FORMATS below.)
.TP
OPT(G)IT(out_grdfile)
Specify the name of the output grid file.
(See GRID FILE FORMATS below.)
#include "explain_-J.txt"
.SH OPTIONAL ARGUMENTS
.TP
OPT(A)[BD(c|i|p|e|f|k|M|n)]
Force 1:1 scaling, i.e., output (or input, see OPT(I)) data are in actual projected meters [BD(e)].  To specify other units,
append BD(f) (feet), BD(k) (km), BD(M) (statute mile), BD(n) (nautical mile), BD(i) (inch), BD(c) (cm), or BD(p) (points).
Without OPT(A), the output (or input, see OPT(I)) are in the units specified by BD(PROJ_LENGTH_UNIT) (but see OPT(M)).
.TP
OPT(C)[IT(dx/dy)]
Let projected coordinates be relative to projection center [Default is relative to lower left corner].
Optionally, add offsets in the projected units to be added (or subtracted when OPT(I) is set) to (from)
the projected coordinates, such as false eastings and northings for particular projection zones [0/0].
.TP
OPT(D)GMT_inc_OPT
Set the grid spacing for the new grid.  Append BD(m) for arc minutes, BD(s) for arc seconds.
If neither OPT(D) nor OPT(E) are set then we select the same number of output nodes as there
are input nodes.
.TP
OPT(E)IT(dpi)
Set the resolution for the new grid in dots per inch.
.TP
OPT(I)
Do the Inverse transformation, from rectangular to geographical.
.TP
OPT(Mc)|BD(i)|BD(p)
Append BD(c), BD(i), or BD(p) to indicate that cm, inch, or point should be the projected measure unit
[Default is set by BD(PROJ_LENGTH_UNIT) in BD(gmt.conf)].  Cannot be used with OPT(A).
#include "explain_-R.txt"
You may ask to project only a subset of the grid by specifying a smaller input IT(w/e/s/n) region
[Default is the region given by the grid file].
#include "explain_-V.txt"
#include "explain_-n.txt"
#include "explain_nodereg.txt"
#include "explain_help.txt"
#include "explain_grd_inout.txt"
.SH EXAMPLES
To transform the geographical grid dbdb5.nc onto a pixel Mercator grid at 300 dpi, run
.br
.sp
grdproject dbdb5.nc -R20/50/12/25 -Jm0.25i -E300 -r
OPT(G)dbdb5_merc.nc 
.br
.sp
To inversely transform the file topo_tm.nc back onto a geographical grid, use
.br
.sp
grdproject topo_tm.nc -R-80/-70/20/40 -Jt-75/1:500000 -I -D5m -V -Gtopo.nc
.br
.sp
This assumes, of course, that the coordinates in topo_tm.nc were created with the same projection parameters.
.br
To inversely transform the file topo_utm.nc (which is in UTM meters) back to a geographical grid we
specify a one-to-one mapping with meter as the measure unit:
.br
.sp
grdproject topo_utm.nc -R203/205/60/65 -Ju5/1:1 -I -Mm -Gtopo.nc -V
.br
.SH RESTRICTIONS
The boundaries of a projected (rectangular) data set will not necessarily give rectangular
geographical boundaries (Mercator is one exception).  In those cases some nodes may be unconstrained (set to NaN).
To get a full grid back, your input grid may have to cover a larger area than you are interested in.
.SH "SEE ALSO"
.IR gmt (1),
.IR gmt.conf (5),
.IR mapproject (1)
