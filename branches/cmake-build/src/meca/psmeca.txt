#include "common_options.txt"
.TH PSMECA 1 MANDATE GMT_STRING "Generic Mapping Tools [meca supplement]"
.SH NAME
psmeca \- Plot focal mechanisms on maps
.SH SYNOPSIS
psmeca [ IT(table) ] GMT_J_OPT GMT_Rgeo_OPT
[ GMT_B_OPT ] [ OPT(C)[IT(pen)][BD(P)IT(pointsize)] ] [ OPT(D)IT(depmin)/IT(depmax) ]
[ OPT(E)IT(fill)] [ OPT(G)IT(fill)]
[ GMT_K_OPT ] [ OPT(L)[IT(pen)] ] [ OPT(M) ] [ OPT(N) ] [ GMT_O_OPT ]
[ GMT_P_OPT ] 
[ OPT(S)IT(<format><scale>)[/BD(d)]] [ OPT(T)IT(num_of_plane)[IT(pen)] ]
[ GMT_U_OPT ] [ GMT_V_OPT ] [ OPT(W)IT(pen) ] [ GMT_X_OPT ]
[ GMT_Y_OPT ] [ OPT(Z)IT(cptfile)] [ OPT(z) ] 
[ OPT(a)[IT(size)[IT(P_symbol)[IT(T_symbol)]]] ] [ GMT_c_OPT ]
[ OPT(e)IT(fill) ] [ OPT(g)IT(fill) ] [ GMT_H_OPT ] [ GMT_i_OPT ] [ OPT(o) ] [ OPT(p)IT(pen) ]
[ OPT(t)IT(pen) ] [ GMT_colon_OPT ]
.SH DESCRIPTION
BD(psmeca) reads data values from IT(files) [or standard input]
and generates IT(PostScript) code that will plot focal mechanisms
on a map.  Most options are the same as for BD(psxy).
The IT(PostScript) code is written to standard output.
#include "explain_commonitems.txt"
.SH REQUIRED ARGUMENTS
#include "explain_intables.txt"
#include "explain_-J.txt"
#include "explain_-Rgeo.txt"
.TP
OPT(S)IT(<format><scale>)[/BD(d)]
Selects the meaning of the columns in the data file .
In order to use the same file to plot cross-sections, depth is in third column.
Nevertheless, it is possible to use "old style" BD(psvelomeca) input files
without depth in third column using the OPT(o) option.
.TP
OPT(Sa)IT(scale[/fontsize[/offset)[BD(u)]]]
Focal mechanisms in Aki and Richards convention.
IT(scale) adjusts the scaling of the radius of the "beach ball",
which will be proportional to the magnitude.  Scale is the size for 
magnitude = 5 in inch (unless BD(c), BD(i), BD(m), or BD(p) is appended).
Use the OPT(T) option
to render the beach ball transparent by drawing only the nodal planes
and the circumference.  The color or shade of the compressive
quadrants can be specified with the OPT(G) option.  The color or shade
of the extensive quadrants can be specified with the OPT(E) option.
Parameters are expected to be in the following columns:
.RS
.TP
BD(1),BD(2):
longitude, latitude of event (OPT(:) option interchanges order)
.TP
BD(3):
depth of event in kilometers
.TP
BD(4),BD(5),BD(6):
strike, dip and rake in degrees
.TP
BD(7):
magnitude
.TP
BD(8),BD(9):
longitude, latitude at which to place beach ball. Entries in these
columns are necessary with the OPT(C) option.  Using 0,0 in columns
8 and 9 will plot the beach ball at the longitude, latitude given in
columns 1 and 2.  The OPT(:) option will interchange the order of
columns (1,2) and (8,9).
.TP
BD(10):
Text string to appear above the beach ball (optional).
.RE
.TP
OPT(Sc)IT(scale[/fontsize[/offset)[BD(u)]]]
Focal mechanisms in Harvard CMT convention.
IT(scale) adjusts the scaling of the radius of the "beach ball",
which will be proportional to the magnitude. Scale is the size for 
magnitude = 5 (that is M0 = 4.0E23 dynes-cm) 
in inch (unless BD(c), BD(i), BD(m), or BD(p) is appended).
Use the OPT(T) option
to render the beach ball transparent by drawing only the nodal planes
and the circumference. The color or shade of the compressive quadrants
can be specified with the OPT(G) option.  The color or shade
of the extensive quadrants can be specified with the OPT(E) option.
Parameters are expected to be in the following columns:
.RS
.TP
BD(1),BD(2):
longitude, latitude of event (OPT(:) option interchanges order)
.TP
BD(3):
depth of event in kilometers
.TP
BD(4),BD(5),BD(6):
strike, dip, and rake of plane 1
.TP
BD(7),BD(8),BD(9):
strike, dip, and rake of plane 2
.TP
BD(10),BD(11):
mantissa and exponent of moment in dyne-cm
.TP
BD(12),BD(13):
longitude, latitude at which to place beach ball. Entries in these
columns are necessary with the OPT(C) option.  Using (0,0) in columns
12 and 13 will plot the beach ball at the longitude, latitude given in
columns 1 and 2.  The OPT(:) option will interchange the order of
columns (1,2) and (12,13).
.TP
BD(14):
Text string to appear above the beach ball (optional).
.RE
.TP
OPT(Sm|d|z)IT(scale[/fontsize[/offset)[BD(u)]]]
Seismic moment tensor (Harvard CMT, with zero trace). IT(scale) adjusts the
scaling of the radius of the "beach ball", which will be proportional 
to the magnitude. Scale is the size for magnitude = 5 (that is scalar seismic
moment = 4.0E23 dynes-cm)
in inch (unless BD(c), BD(i), BD(m), or BD(p) is appended).
(OPT(T)IT(0) option overlays best double couple transparently.)
Use OPT(Sm) to plot the Harvard CMT seismic moment tensor with zero trace.
Use OPT(Sd) to plot only the double couple part of moment tensor.
Use OPT(Sz) to plot the anisotropic part of moment tensor (zero trace).
The color or shade of the compressive quadrants
can be specified with the OPT(G) option.  The color or shade
of the extensive quadrants can be specified with the OPT(E) option.
Parameters are expected to be in the following columns:
.RS
.TP
BD(1),BD(2):
longitude, latitude of event (OPT(:) option interchanges order)
.TP
BD(3):
depth of event in kilometers
.TP
BD(4),BD(5),BD(6),BD(7),BD(8),BD(9):
mrr, mtt, mff, mrt, mrf, mtf in 10*exponent dynes-cm
.TP
BD(10):
exponent
.TP
BD(11),BD(12):
longitude, latitude at which to place beach ball. Entries in these
columns are necessary with the OPT(C) option.  Using (0,0) in columns
11 and 12 will plot the beach ball at the longitude, latitude given in
columns 1 and 2.  The OPT(:) option will interchange the order of
columns (1,2) and (11,12).
.TP
BD(13):
Text string to appear above the beach ball (optional).
.RE
.TP
OPT(Sp)IT(scale[/fontsize[/offset)[BD(u)]]]
Focal mechanisms given with partial data on both planes.
IT(scale) adjusts the scaling of the radius of the "beach ball",
which will be proportional to the magnitude. Scale is the size
for magnitude = 5 in inch (unless BD(c), BD(i), BD(m), or BD(p) is appended).
The color or shade of the compressive quadrants
can be specified with the OPT(G) option.  The color or shade
of the extensive quadrants can be specified with the OPT(E) option.
Parameters are expected to be in the following columns:
.RS
.TP
BD(1),BD(2):
longitude, latitude of event (OPT(:) option interchanges order)
.TP
BD(3):
depth of event in kilometers
.TP
BD(4),BD(5):
strike, dip of plane 1
.TP
BD(6):
strike of plane 2
.TP
BD(7):
must be -1/+1 for a normal/inverse fault
.TP
BD(8):
magnitude
.TP
BD(9),BD(10):
longitude, latitude at which to place beach ball. Entries in these
columns are necessary with the OPT(C) option.  Using (0,0) in columns
9 and 10 will plot the beach ball at the longitude, latitude given in
columns 1 and 2.  The OPT(:) option will interchange the order of
columns (1,2) and (9,10).
.TP
BD(11):
Text string to appear above the beach ball (optional).
.RE
.TP
OPT(Sx|y|t)IT(scale[/fontsize[/offset)[BD(u)]]]
Principal axis.
IT(scale) adjusts the scaling of the radius of the "beach ball", which will
be proportional to the magnitude. Scale is the size for magnitude = 5 (that is
seismic scalar moment = 4*10e+23 dynes-cm)
in inch (unless BD(c), BD(i), BD(m), or BD(p) is appended).
(OPT(T)IT(0) option overlays best double couple transparently.)
Use OPT(Sx) to plot standard Harvard CMT.
Use OPT(Sy) to plot only the double couple part of moment tensor.
Use OPT(St) to plot zero trace moment tensor.
The color or shade of the compressive quadrants
can be specified with the OPT(G) option.  The color or shade
of the extensive quadrants can be specified with the OPT(E) option.
Parameters are expected to be in the following columns:
.RS
.TP
BD(1),BD(2):
longitude, latitude of event (OPT(:) option interchanges order)
.TP
BD(3):
depth of event in kilometers
.TP
BD(4),BD(5),BD(6),BD(7),BD(8),BD(9),BD(10),BD(11),BD(12):
value (in 10*exponent dynes-cm), azimuth, plunge of T, N, P axis.
.TP
BD(13):
exponent
.TP
BD(14),BD(15):
longitude, latitude at which to place beach ball. Entries in these
columns are necessary with the OPT(C) option.  Using (0,0) in columns
14 and 15 will plot the beach ball at the longitude, latitude given in
columns 1 and 2.  The OPT(:) option will interchange the order of
columns (1,2) and (14,15).
.TP
BD(16):
Text string to appear above the beach ball (optional).
.RE
.LP
.SH OPTIONAL ARGUMENTS
#include "explain_-B.txt"
.TP
OPT(C)[IT(pen)][BD(P)IT(pointsize)]
Offsets focal mechanisms to the longitude, latitude specified in the last
two columns of the input file before the (optional) text string.  A small
circle is plotted at the initial location and a line connects the beachball
to the circle.  Specify IT(pen) and/or IT(pointsize) to change the line
style and/or size of the circle. [Defaults: IT(pen) as given by OPT(W); IT(pointsize) 0].
.TP
OPT(D)IT(depmin/depmax)
Plots events between depmin and depmax.
.TP
OPT(E)IT(fill)
Selects filling of extensive quadrants. Usually white.
Set the color [Default is white].
.TP
OPT(G)IT(fill)
Selects filling of focal mechanisms.  By
convention, the compressional quadrants of the focal mechanism beach
balls are shaded.  Set the color [Default is black]. 
#include "explain_-K.txt"
.TP
OPT(L)IT(pen)
Draws the "beach ball" outline with IT(pen) attributes instead of with the default pen set by OPT(W).
.TP
OPT(M)
Use the same size for any magnitude. Size is given with OPT(S).
.TP
OPT(N)
Does BD(not) skip symbols that fall outside frame boundary specified by
OPT(R) [Default plots symbols inside frame only].
#include "explain_-O.txt"
#include "explain_-P.txt"
.TP
OPT(T)[IT(num_of_planes)][BD(/)IT(pen)]
Plots the nodal planes and outlines the bubble which is transparent.
If IT(num_of_planes) is
.br
IT(0): both nodal planes are plotted;
.br
IT(1): only the first nodal plane is plotted;
.br
IT(2): only the second nodal plane is plotted.
.br
Append BD(/)IT(pen) to set the pen attributes for this feature. Default pen is as set by OPT(W).
#include "explain_-U.txt"
#include "explain_-V.txt"
.TP
OPT(W)IT(pen)
Set pen attributes for all lines and the outline of symbols [Defaults: width = default, color = black, style = solid].
This setting applies to OPT(C), OPT(L), OPT(T), OPT(p), OPT(t), and OPT(z), unless overruled by options to those
arguments.
#include "explain_-XY.txt"
.TP
OPT(Z)IT(cptfile)
Give a color palette file and let compressive part color be determined by the z-value in the
third column. 
.TP
OPT(a)[IT(size)/[IT(P_axis_symbol)[IT(T_axis_symbol)]]]
Computes and plots P and T axes with symbols. Optionally specify IT(size)
and (separate) P and T axis symbols from the following:
(BD(c)) circle, (BD(d)) diamond, (BD(h)) hexagon,
(BD(i)) inverse triangle,
(BD(p)) point, (BD(s)) square, (BD(t)) triangle,
(BD(x)) cross. [Defaults: 0.2BD(c)/BD(cc) or 0.08BD(i)/BD(cc).]
#include "explain_-c.txt"
.TP
OPT(e)IT(fill)
Selects filling of T axis symbol.
Set the color. [Default is white]  
.TP
OPT(g)IT(fill)
Selects filling of P axis symbol.
Set the color. [Default is black]
#include "explain_-h.txt"
#include "explain_-icols.txt"
.TP
OPT(o)
Use the BD(psvelomeca) input format without depth in the third column.
.TP
OPT(p)[IT(pen)]
Draws the P axis outline using default pen (see OPT(W)), or sets pen attributes.
.TP
OPT(t)[IT(pen)]
Draws the T axis outline using default pen (see OPT(W)), or sets pen attributes.
.TP
OPT(z)[IT(pen)]
Overlay zero trace moment tensor using default pen (see OPT(W)), or sets pen attributes.
#include "explain_colon.txt"
#include "explain_help.txt"
.SH EXAMPLES
.sp
The following file should give a normal-faulting CMT mechanism:
.br
BD(psmeca) OPT(R)239/240/34/35.2 OPT(Jm)4 OPT(Sc)0.4 OPT(H)1 <<END > test.ps
.br
lon     lat    depth str dip slip  st dip slip mant exp plon plat
.br
239.384 34.556  12.  180  18  -88   0  72  -90  5.5  0   0    0
.br
END
.br
.sp
.SH "SEE ALSO"
.IR GMT (1),
.IR psbasemap (1),
.IR psxy (1)
.SH REFERENCES
.br
Bomford, G., Geodesy, 4th ed., Oxford University Press, 1980.
.br
Aki, K. and P. Richards, Quantitative Seismology, Freeman, 1980.
.br
F. A. Dahlen and Jeroen Tromp, Theoretical Seismology, Princeton, 1998, p.167.
.br
Cliff Frohlich, Cliff's Nodes Concerning Plotting Nodal Lines for P, Sh and Sv\"'
.br
Seismological Research Letters, Volume 67, Number 1, January-February, 1996
.br
Thorne Lay, Terry C. Wallace, Modern Global Seismology, Academic Press, 1995, p.384.
.br
W.H. Press, S.A. Teukolsky, W.T. Vetterling, B.P. Flannery, Numerical Recipes in
 C, Cambridge University press (routine jacobi)
.SH AUTHORS
Genevieve Patau
.br
CNRS UMR 7580
.br
Seismology Dept.
.br
Institut de Physique du Globe de Paris
.br
(patau@.ipgp.jussieu.fr)
