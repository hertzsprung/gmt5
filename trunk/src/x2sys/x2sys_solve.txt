#include "common_options.txt"
.TH X2SYS_SOLVE 1 MANDATE GMT_STRING "Generic Mapping Tools"
.SH NAME
x2sys_solve \- Determine systematic corrections from crossovers
.SH SYNOPSIS
\fBx2sys_solve\fP OPT(C)\fIcolumn\fP OPT(E)\fImode\fP [ \fICOEs.d\fP ] [ GMT_V_OPT ] [ GMT_bi_OPT ]
.SH DESCRIPTION
\fBx2sys_solve\fP will use the supplied crossover information to
solve for systematic corrections that can then be applied per track
to improve data quality. Several systematic corrections can be solved
for using a least-squares approach.
.TP
.B \-C
Specify which data column you want to process.  Needed for proper formatting
of the output correction table and should match the same option used in
\fBx2sys_list\fP when preparing the input data.
.TP
.B \-E
The correction type you wish to model.  Choose among the following functions
f(p), where \fIp\fP are the \fIm\fP parameters per track that we will fit simultaneously
using a least squares approach:
.br
\fBc\fP will fit f(p) = \fIa\fP (a constant offset); records must contain cruise ID, COE.
.br
\fBd\fP will fit f(p) = \fIa\fP + \fIb\fP * \fId\fP (linear drift; \fId\fP is distance;
records must contain cruise ID, d1, d2, COE.
.br
\fBh\fP will fit f(p) = \fIa\fP + \fIb\fP cos(H) + \fIc\fP cos(2H) + \fId\fP sin(H) + \fIe\fP sin(2H) (magnetic heading correction);
records must contain cruise ID, heading H, COE.
.br
\fBs\fP will fit f(p) = \fIa\fP * z (a unit scale correction); records must contain cruise ID, z1, z2.
.br
\fBt\fP will fit f(p) = \fIa\fP + \fIb\fP * (\fIt - t0\fP) (linear drift; \fIt0\fP is the start time of the track);
records must contain cruise ID, t1-t0, t2-t0, COE.
.SH OPTIONS
No space between the option flag and the associated arguments.
.TP
\fICOEs.d\fP
Name of file with the required crossover columns.  NOTE: If OPT(bi) is used then the
first two columns are expected to hold the integer track IDs; otherwise we expect
those columns to hold the text string names of the two tracks.
#include "explain_-V.txt"
#include "explain_-bi.txt"
.SH EXAMPLES
To fit a simple bias offset to faa for all tracks, try
.br
.sp
\fBx2sys_list\fP COE_data.txt \fB\-V \-T\fPmgd77 \fB\-C\fPfaa \fB\-F\fPnc  > faa_coe.txt
.br
\fBx2sys_solve\fP faa_coe.txt \fB\-V \-C\fPfaa \fB\-E\fPc > coe_table.txt
.br
.sp
To fit a faa linear drift with time instead, try
.br
.sp
\fBx2sys_list\fP COE_data.txt \fB\-V \-T\fPmgd77 \fB\-C\fPfaa \fB\-F\fPnTc  > faa_coe.txt
.br
\fBx2sys_solve\fP faa_coe.txt \fB\-V \-C\fPfaa \fB\-E\fPt > coe_table.txt
.br
.sp
To estimate heading corrections based on magnetic crossovers associated with the tag mgd77
from the file COE_data.txt, try
.br
.sp
\fBx2sys_list\fP COE_data.txt \fB\-V \-T\fPmgd77 \fB\-C\fPmag \fB\-F\fPnhc > mag_coe.txt
.br
\fBx2sys_solve\fP mag_coe.txt \fB\-V \-C\fPmag \fB\-E\fPh > coe_table.txt
.br
.sp
To estimate unit scale corrections based on bathymetry crossovers, try
.br
.sp
\fBx2sys_list\fP COE_data.txt \fB\-V \-T\fPmgd77 \fB\-C\fPdepth \fB\-F\fPnz > depth_coe.txt
.br
\fBx2sys_solve\fP depth_coe.txt \fB\-V \-C\fPdepth \fB\-E\fPs > coe_table.txt
.SH "SEE ALSO"
.IR x2sys_binlist (1)
.IR x2sys_cross (1)
.IR x2sys_datalist (1)
.IR x2sys_get (1)
.IR x2sys_init (1)
.IR x2sys_list (1)
.IR x2sys_put (1)
.IR x2sys_report (1)
