#include "common_options.txt"
.TH PS2RASTER 1 MANDATE GMT_STRING "Generic Mapping Tools"
.SH NAME
ps2raster \- Converts one or several \fIPostScript\fP file(s) to other formats using GhostScript
.SH SYNOPSIS
\fBps2raster\fP \fIpsfile(s)\fP [ OPT(A)[\fBu\fP] ] [ OPT(C)\fIgs_option\fP] [ OPT(D)\fIoutdir\fP ] 
[ OPT(E)\fIresolution\fP ] [ OPT(G)\fIghost_path\fP ] [ OPT(L)\fIlistfile\fP] [ OPT(P) ] 
[ OPT(Q)[\fBg\fP|\fBt\fP][1|2|4] ] [ OPT(R) ][ OPT(S) ]  
[ OPT(Tb)|\fBe\fP|\fBf\fP|\fBj\fP|\fBg\fP|\fBG\fP|\fBm\fP|\fBt\fP ] [ OPT(V) ] [ OPT(W) ] 
.SH DESCRIPTION
\fBps2raster\fP converts one or more \fIPostScript\fP files to other formats (BMP, EPS, JPEG, PDF, PNG, PPM, TIFF)
using GhostScript. Input file names are read from the command line or from a file that lists them.
The size of the resulting images is determined by the BoundingBox (or HiResBoundingBox, if present).
As an option, a tight (HiRes)BoundingBox may be computed first. As another option, it can compute 
ESRI type world files used to reference, for instance, tif files and make them be recognized as geotiff.
.TP
\fIpsfiles\fP
Names of \fIPostScript\fP files to be converted. The output files will have the same name (unless OPT(F) is used) but with the
conventional extension name associated to the raster format (e.g. .jpg for the jpeg format).  Use
OPT(D) to redirect the output to a different directory.
.SH OPTIONS
.TP
OPT(A)
Adjust the BoundingBox and HiResBoundingBox to the minimum required by the image content.  Append \fBu\fP to first remove any
GMT-produced time-stamps.
.TP
OPT(C)
Specify a single, custom option that will be passed on to GhostScript as is.  Repeat to add several options [none].
.TP
OPT(D)
Sets an alternative output directory (which must exist) [Default is the same directory as the PS files].
Use OPT(D.) to place the output in the current directory instead.
.TP
OPT(E)
Set raster resolution in dpi [default = 720 for PDF, 300 for others].
.TP
OPT(F)
Force the output file name. By default output names are constructed using the
input names as base, which are appended with an appropriate extension. Use this option
to provide a different name, but without extension. Extension is still determined automatically.
.TP
OPT(G)
Full path to your GhostScript executable.
NOTE: For Unix systems this is generally not necessary.
However, under Windows, GhostScript is not added to the system's path. So either you do it yourself,\"'
or give the full path here. (e.g., OPT(G)c:\\programs\\gs\\gs7.05\\bin\\gswin32c).
.TP
OPT(L)
The \fIlistfile\fP is an ASCII file with the names of the \fIPostScript\fP files to be converted.
.TP
OPT(N)
This option is obsolete.
Use OPT(S) to print the GhostScript command, if applicable.
Use OPT(Te) to save the intermediate EPS file.
.TP
OPT(P)
Force Portrait mode. All Landscape mode plots will be rotated back so that they show unrotated in
Portrait mode. This is practical when converting to image formats or preparing EPS or PDF plots for
inclusion in documents.
.TP
OPT(Q)
Set the anti-aliasing options for \fBg\fPraphics or \fBt\fPext.  Append the size of the subsample
box (1, 2, or 4) [4].  Default is no anti-aliasing (same as \fIbits\fP = 1).
.TP
OPT(R)
Provide true coordinates image limits to be used within the computation of world files.
This option takes precedence over OPT(W) as it trust more on user input but otherwise it
behaves like the OPT(W) option (see below). In principle it can also be used with non \fBGMT\fP
PostScript files but obviously subject to the same restrictions as explained in OPT(W) option
An IMPORTANT difference of using this as compared to OPT(W) is that one can enter here the
TRUE image limits, whilst OPT(W) captures only the non projected (e.g. geographical) coordinates.
In fact when the file being processed contains a projected image it is necessary to know its
exact limits and projection parameters. With that knowledge one can use mapproject to compute
the projected region and enter it here. This option sets OPT(A).
.TP
OPT(S)
Print to standard output the GhostScript command after it has been executed.
.TP
OPT(T)
Sets the output format, where \fBb\fP means BMP, \fBe\fP means EPS, \fBf\fP means PDF, \fBj\fP means JPEG, \fBg\fP means PNG,
\fBG\fP means transparent PNG (untouched regions are transparent), \fBm\fP means PPM, and \fBt\fP means TIFF [default is JPEG].
For \fBbjgt\fP you can append - to get a grayscale image only.
The EPS format can be combined with any of the other formats. For example, OPT(Tef) creates both an EPS and
a PDF file.
#include "explain_-V.txt"
.TP
OPT(W)
Write a ESRI type world file suitable to make (e.g) .tif files be recognized as geotiff by
softwares that know how to do it. Be aware, however, that this is a limited functionality
as it only works correctly with LINEAR plots produced by \fBGMT\fP. Furthermore, different results
are obtained depending on the image contents and if the OPT(B) option has been used or not.
The complication introduced by the -B option is that it creates a frame that complicates
the necessary computations. A good solution is to use --FRAME_WIDTH=0.001 to reduce the frame
to a bare minimum. In any case, DO NOT plot annotations or tick marks on the outer side of
the image. If absolutely necessary use negative values in annotation parameters, like for
instances --TICK_LENGTH=-0.075i --ANNOT_OFFSET=-0.05i. However, if the plot has any of the sides
with whites only than the algorithm will fail miserably as those whites will be eaten by
ghostscript. In that case one really must use OPT(B).
.br
When the image was built using projected coordinates, the computations here will be totally
wrong because what is stored in the PostScript file are the geographical coordinates and not
the projected ones that we actually need. In that case, the only escape is to use the OPT(R)
option together with a little help from mapproject.
.br
The world file naming follows the convention of jamming a 'w' in the file extension. So, if
output is tif OPT(Tt) the world file is a .tfw, for jpeg we have a .jgw and so on.
This option sets OPT(A).
.SH NOTES
The conversion to raster images (BMP, JPEG, PNG, PPM or TIFF) inherently results in loss of details that are
available in the original \fIPostScript\fP file. Choose a resolution that is large enough for the application that
the image will be used for. For web pages, smaller dpi values suffice, for Word documents and PowerPoint presentations
a higher dpi value is recommended. \fBps2raster\fP uses the loss-less Flate compression technique when
creating JPEG, PNG and TIFF images.
.br
.sp
EPS is a vector, not a raster format. Therefore, the \fB-E\fP option has no effect on the creation
of EPS files. Using the option OPT(Te) will remove PageSize commands from the \fIPostScript\fP file and will
adjust the BoundingBox when the OPT(A) option is used.  Note the original and required BoundingBox is limited
to integer points, hence Adobe added the optional HiResBoundingBox to add more precision in sizing.  The OPT(A)
option calculates both and writes both to the EPS file used in the rasterization (and output if OPT(Te) is set).
.br
.sp
Although PDF is also a vector format, the OPT(E) option has an effect on the resolution of pattern fills
and fonts that are stored as bitmaps in the document. \fBps2raster\fP therefore uses a larger default
resolution when creating PDF files. In order to obtain high-quality PDF files, the \fI/prepress\fP options
are in effect, allowing only loss-less compression of raster images embedded in the \fIPostScript\fP file.
.br
.sp
Although \fBps2raster\fP was developed as part of the \fBGMT\fP, it can be used to convert \fIPostScript\fP files created
by nearly any graphics program.
.br
.sp
See Appendix C of the \fBGMT Technical Reference and Cookbook\fP for more information on how
\fBps2raster\fP is used to produce graphics that can be inserted into other documents (articles, presentations,
posters, etc.).
.SH EXAMPLE
To convert a the file psfile.ps to PNG using a tight BoundingBox and rotating it back to normal
orientation in case it was in Landscape mode:
.br
.sp
\fBps2raster\fP psfile.ps OPT(A) OPT(P) OPT(Tg)
.br
.sp
To create a simple linear map with pascoast and convert it to tif with a .tfw The PS_LINE_JOIN plays here an 
important role in avoiding that line kinks (the coastlines) get slightly out of the map thus confusing
the tight BoundingBox computation.
.br
.sp
\fBpscoast\fP OPT(JX)12cd OPT(R)-10/-4/37/43 OPT(W)1 OPT(Di) OPT(B)g30m OPT(P) OPT(G200) --FRAME_WIDTH=0.001 --PS_LINE_JOIN=round > cara.ps
\fBps2raster\fP cara OPT(Tt) OPT(W)
.br
.sp
To create a Mercator version of the above example and use GDAL to produce a true geotiff file. In this case we
need also to convert the map limits in geographical coords into Mercator.
.br
.sp
\fBpscoast\fP OPT(JM)12c OPT(R)-10/-4/37/43 OPT(W)1 OPT(Di) OPT(B)g30m OPT(P) OPT(G200) --FRAME_WIDTH=0.001 --PS_LINE_JOIN=round > cara.ps
.br
(echo -10 37; echo -4 43) | \fBmapproject\fP OPT(Jm)1:1 OPT(C) OPT(F) OPT(R)-10/10/0/45 --D_FORMAT=%.3f
.br
-1113194.908    4413389.889
.br
-445277.963     5282821.824
.br
\fBps2raster\fP cara.ps OPT(Tt) OPT(R)-1113194.908/-445277.963/4413389.889/5282821.824 
.br
gdalwarp -s_srs +proj=merc -co TFW=YES cara.tif carageo.tiff 
.br
.sp
(This command assumes that ghostscript can be found in your system's path.)\"'
.SH GHOSTSCRIPT OPTIONS
GhostScript accepts a rich selection of command-line options that modify its behavior.  Many of these are
set indirectly by the options available above.  However, hard-core usage may require some users to add additional
options to fine-tune the result.  Use OPT(S) to examine the actual command used, and add custom options
via one or more instances of the OPT(C) option.  For instance, to turn on image interpolation for all images,
improving image quality for scaled images at the expense of speed, use OPT(C)-dDOINTERPOLATE.
See www.ghostscript.com for complete documentation.
.SH "SEE ALSO"
.IR GMT (1),
.IR gs (1)
