#include "common_options.txt"
.TH GMTDIGITIZE 1 MANDATE GMT_STRING "Generic Mapping Tools [misc supplement]"
#define	DIG_PORT	/dev/ttyS0
#define	DIG_LPI		2540
#define	LEN1	0.5
#define SCALE1	OPT(Jm)1:1
.SH NAME
gmtdigitize \- Digitizing and Inverse map transformation of map x/y coordinates 
.SH SYNOPSIS
BD(gmtdigitize) GMT_J_OPT GMT_Rgeo_OPT 
[ OPT(A) ] [ OPT(C)IT(device) ] [ OPT(D)IT(limit) ] [ OPT(F) ]
[ OPT(L)IT(lpi) ] [ OPT(N)IT(namestem) ] [ OPT(S) ] 
[ GMT_V_OPT ] [ OPT(Zk)|BD(v) ] [ GMT_bo_OPT ] [ GMT_h_OPT ] [ > output.d ]
.SH DESCRIPTION
BD(gmtdigitize) digitizes points from a digitizer via a serial line connection and
computes map coordinates using the specified map projection.  The program is interactive
and will take you through the setup procedure and how you will digitize points.
The program will determine the actual map scale as well as rotation of the paper that
is taped to the digitizer table.  By default the output will go to stdout.
.br
	No space between the option flag and the associated arguments.  Use upper case for the
option flags and lower case for modifiers.
#include "explain_commonitems.txt"
.SH REQUIRED ARGUMENTS
#include "explain_-J.txt"
For geographic projections you can give 1 as the scale will be solved for anyway.
#include "explain_-R.txt"
.SH OPTIONAL ARGUMENTS
.TP
OPT(A)
Give an audible signal each time the digitizer mouse/puck is clicked [Default is silent].
.TP
OPT(C)IT(device)
Specify the device (port) to read from [Default is DIG_PORT].
.TP
OPT(D)IT(limit)
Only output a point if it is further than IT(limit) units from the previous point.  Append
BD(c), BD(i), BD(m), BD(p) for cm, inch, meter, or point, respectively [Default is no limit].
.TP
OPT(F)
Force the program to ask for 4 arbitrary calibration points [Default is to use the
4 corners of the map, if possible].
.TP
OPT(H)
This option allows you to write out any number of header records to the beginning of the
output file.  Each record will automatically start with a #-character to indicate comment.
Headers are not written if multiple output files are selected with OPT(N) OPT(m).
.TP
OPT(L)IT(lpi)
Set the digitizer table resolution in lines per inch [DIG_LPI].
.TP
OPT(N)IT(namestem)
Set name for output file(s).  If a regular filename is given, then all digitized data will be written to that
file.  If the file contains a C-format for an integer (i.e., %d) then the file is used as a format statement
to create unique filenames based on the current segment number (e.g., line_%d.d will yield files line_0.d, line_1.d, etc).
By default, all output is written to stdout.  Multiple segment files requires specifying the OPT(m) option.
.TP
OPT(S)
Suppress points that fall outside the specified map region [Default outputs all points].
#include "explain_-V.txt"
The program will also duplicate data output to stderr for monitoring.
.TP
OPT(Zk)|BD(v)
Append BD(v) to prompt for a IT(z)-value and output it as a third data column.
Append BD(k) to output the button key as the final data column.  Both OPT(Zk) and
OPT(Zv) can be specified. [Default is just 2 column x,y output].
#include "explain_-bo.txt"
#include "explain_help.txt"
.SH EXAMPLES
To digitize lines from a mercator map made for a given region, and
save each line segment in individual files called segment_000.xy, segment_001.xy etc, try
.br
.sp
gmtdigitize OPT(R)20/50/12/25 SCALE1 OPT(m) OPT(N)segment_%3.3d.xy
.br
.sp
To digitize seismically defined interfaces from a multichannel seismic section, with horizontal
distances from 130 to 970, and vertical times from 0 to 10 seconds, write out the button code, and
save all line segment to a single multisegment file, and beep at each click, try
.br
.sp
gmtdigitize OPT(R)130/970/0/10 OPT(Jx)1/-1 OPT(m) OPT(A) OPT(Z) > interfaces.d
.br
.SH SYSTEM SETUP
This applies to the Calcomp DrawingBoard III hooked up to a RedHat Linux workstation.
We use /dev/ttyS0 as the serial port and change permissions so that it is world read/write-able.
Then, stty -F /dev/ttyS0 evenp will set the terminal settings, which can be checked with stty -F /dev/ttyS0 -a.
Setup of digitizer: We use the CalComp 2000 ASCII (Save 3) setup, which has:
.br
Mode: Point
.br
Baud Rate: 9600
.br
Data Bits: 7
.br
Parity: Even
.br
Data Rate: 125 pps
.br
Resolution: 200 lpi
.br
Output Format: Format 0
.br
Emulation: CalComp 2000 ASCII
.br
(A)We need to make a slight modification to the Preset No 3 settings:
(1) 2450 LPI instead of 200, and (2) None instead of yes for added CR.
These modifications can be changed and saved to Preset 3 on
the digitizer but a power outage may reset in back to the factory defaults, necessitating
a manual reset of those two settings.
(B) Setup tty port.  stty -F /dev/ttyS0 evenp
(C) Run gmtdigitize.  Map scale does not matter; it is computed from the region and plot size.
.SH "SEE ALSO"
.IR gmtdefaults (l),
.IR GMT (l),
.IR gmtstitch (l),
.IR mapproject (l),
.IR project (l)
