#include "common_options.txt"
.TH PSXYZ 1 MANDATE GMT_STRING "Generic Mapping Tools"
#define PARAMS_SI 0.075\fBc\fP/0.3\fBc\fP/0.25\fBc\fP
#define LEN_1 1.25
#define OPT_1	OPT(Jx)1.25\fBc\fP OPT(Jz)0.125\fBc\fP OPT(So)1.25\fBc\fP
#define PARAMS_US 0.03\fBi\fP/0.12\fBi\fP/0.1\fBi\fP
.SH NAME
psxyz \- Plot lines, polygons, and symbols in 3-D
.SH SYNOPSIS
\fBpsxyz\fP \fIfiles\fP GMT_J_OPT GMT_Jz_OPT GMT_Rgeoz_OPT
[ GMT_B_OPT ] [ OPT(C)\fIcptfile\fP ] [ OPT(D)\fIdx\fP/\fIdy\fP[\fIdz\fP] ] [ GMT_E_OPT ]
[ OPT(G)\fIfill\fP ] [ GMT_H_OPT ] [ OPT(I)\fIintens\fP ] [ GMT_K_OPT ] [ OPT(L) ]
[ OPT(N) ] [ GMT_O_OPT ] [ GMT_P_OPT ] [ OPT(Q) ] [ OPT(S)[\fIsymbol\fP][\fIsize\fP] ] [ GMT_U_OPT ]
[ GMT_V_OPT ] [ OPT(W)[\fB-\fP|\fB+\fP][\fIpen\fP] ] [ GMT_X_OPT ] [ GMT_Y_OPT ] [ OPT(Z)\fIzlevel\fP ]
[ GMT_t_OPT ] [ GMT_bi_OPT ] [ GMT_c_OPT ] [ GMT_fi_OPT ] [ GMT_g_OPT ]  [ GMT_mi_OPT ]
.SH DESCRIPTION
\fBpsxyz\fP reads (x,y,z) triplets from \fIfiles\fP [or standard input] and
generates \fIPostScript\fP code that will plot lines, polygons, or symbols at those locations in 3-D.
If a symbol is selected and no symbol size given, then \fBpsxyz\fP will interpret the fourth column of the
input data as symbol size.  Symbols whose \fIsize\fP is <= 0 are skipped.
If no symbols are specified then the symbol code (see OPT(S) below)
must be present as last column in the input.  Multiple segment files may be plotted using the OPT(m) option.
If OPT(S) is not used, a line connecting the data points will be drawn instead.
To explicitly close polygons, use OPT(L).  Select a fill with OPT(G).
If OPT(G) is set, OPT(W) will control whether the polygon outline is drawn or not.
If a symbol is selected, OPT(G) and OPT(W) determines the fill and outline/no outline, respectively.
The \fIPostScript\fP code is written to standard output.
.TP
\fIfiles\fP
List one or more file-names. If no files are given, \fBpsxyz\fP will read standard input.
#include "explain_-J_short.txt"
#include "explain_-Jz.txt"
#include "explain_-R.txt"
.SH OPTIONS
No space between the option flag and the associated arguments.
#include "explain_-B_short.txt"
.TP
OPT(C)
Give a color palette file.  If OPT(S) is set, let symbol fill color be determined by the
t-value in the fourth column. Additional fields are shifted over by one column
(optional size would be in 5th rather than 4th field, etc.).
If OPT(S) is not set, then \fBpsxyz\fP expects the user to supply a multisegment line or polygon file
(requires OPT(m)) where each segment header contains a OPT(Z)\fIval\fP string.  The \fIval\fP
will control the color of the line or polygon (if OPT(L) is set) via the cpt file.
.TP
OPT(D)
Offset the plot symbol or line locations by the given amounts \fIdx/dy\fP[\fIdz\fP] [Default is no offset].
#include "explain_-E.txt"
.TP
OPT(G)
Select color or pattern for filling of symbols or polygons [Default is no fill].
(See SPECIFYING FILL below).
.br
Note when OPT(m) is chosen, \fBpsxyz\fP will search for OPT(G) and OPT(W)
strings in all the subheaders and let any values thus found over-ride the command line settings
(see OPT(m) below).
#include "explain_-H.txt"
.TP
OPT(I)
Use the supplied \fIintens\fP value (nominally in the -1 to + 1 range) to modulate the fill color by simulating illumination [none].
#include "explain_-K.txt"
.TP
OPT(L)
Force closed polygons: connect the endpoints of the line-segment(s) and draw polygons.
Also, in concert with OPT(C), OPT(m), and OPT(Z) settings in the headers will use the implied
color for polygon fill [Default is polygon pen color].
OPT(N)
Do NOT skip symbols that fall outside map border [Default plots points inside border only].
#include "explain_-O.txt"
#include "explain_-P.txt"
.TP
OPT(Q)
Turn off the automatic sorting of items based on their distance from the viewer.  The default is
to sort the items so that items in the foreground are plotted after items in the background.
.TP
OPT(S)
Plot symbols.  If present, \fIsize\fP is symbol size in the unit set in \.gmtdefaults4
(unless \fBc\fP, \fBi\fP, \fBm\fP, or \fBp\fP is appended).
If the symbol code (see below) is not given it will be read from the last column in the input data;
this cannot be used in conjunction with OPT(b).  Optionally, append
\fBc\fP, \fBi\fP, \fBm\fP, \fBp\fP to indicate that the size information in the
input data is in units of cm, inch, meter, or point, respectively [Default is \fBMEASURE_UNIT\fP].
Note: if you give both size and symbol via the input file you must use \fBMEASURE_UNIT\fP to
indicate the units used for the symbol size.
The uppercase symbols \fBA\fP, \fBC\fP, \fBD\fP, \fBG\fP, \fBH\fP, \fBI\fP, \fBN\fP, \fBS\fP, \fBT\fP
are normalized to have the same area as a circle with diameter \fIsize\fP,
while the size of the corresponding lowercase symbols refers to the diameter of a circumscribed circle.
Choose between these symbol codes:
.TP
OPT(S-)
x-dash (-).  \fIsize\fP is the length of a short horizontal (x-dir) line segment.
.TP
OPT(S+)
plus (+).  \fIsize\fP is diameter of circumscribing circle.
.br
.TP
OPT(Sa)
st\fBa\fPr.  \fIsize\fP is diameter of circumscribing circle.
.TP
OPT(Sb)
Vertical \fBb\fPar extending from \fIbase\fP to y.  \fIsize\fP is bar width. Append \fBu\fP
if \fIsize\fP is in x-units [Default is plot-distance units]. By default,
\fIbase\fP = ymin.  Append \fBb\fP\fIbase\fP to change this value.
.TP
OPT(SB)
Horizontal \fBb\fPar extending from \fIbase\fP to x.  \fIsize\fP is bar width. Append \fBu\fP
if \fIsize\fP is in y-units [Default is plot-distance units]. By default,
\fIbase\fP = xmin.  Append \fBb\fP\fIbase\fP to change this value.
.TP
OPT(Sc)
\fBc\fPircle.  \fIsize\fP is diameter of circle.
.TP
OPT(Sd)
\fBd\fPiamond.  \fIsize\fP is diameter of circumscribing circle.
.TP
OPT(Se)
\fBe\fPllipse.  Direction (in degrees counter-clockwise from horizontal), major_axis, and minor_axis must
be found in columns 4, 5, and 6.
.TP
OPT(SE)
Same as OPT(Se), except azimuth (in degrees east of north) should be given instead of direction.  The azimuth will
be mapped into an angle based on the chosen map projection (OPT(Se) leaves the directions
unchanged.)  Furthermore, the axes lengths must be given in km instead of plot-distance units.  An exception occurs for
a linear projection in which we assume the ellipse axes are given in the same units as OPT(R).
.TP
OPT(Sf)
\fBf\fPront.  OPT(Sf)\fIgap/size\fP[\fIdir\fP][\fItype\fP][:\fIoffset\fP].  Supply distance gap between symbols and symbol size.
If \fIgap\fP is negative, it is interpreted to mean the number of symbols along the front instead.  Append \fIdir\fP to plot symbols
on the \fBl\fPeft or \fBr\fPight side of the front [Default is centered].  Append \fItype\fP to specify which symbol
to plot: \fBb\fPox, \fBc\fPircle, \fBf\fPault, \fBs\fPlip, or \fBt\fPriangle.  [Default is fault].
Slip means left-lateral or right-lateral strike-slip arrows (centered is not an option).  Append :\fIoffset\fP to offset
the first symbol from the beginning of the front by that amount [Default is 0].
.TP
OPT(Sg)
octa\fBg\fPon.  \fIsize\fP is diameter of circumscribing circle.
.TP
OPT(Sh)
\fBh\fPexagon.  \fIsize\fP is diameter of circumscribing circle.
.TP
OPT(Si)
\fBi\fPnverted triangle.  \fIsize\fP is diameter of circumscribing circle.
.TP
OPT(Sj)
Rotated rectangle.  Direction (in degrees counter-clockwise from horizontal), x-dimension, and y-dimension must be found in columns 4, 5, and 6.
.TP
OPT(SJ)
Same as OPT(Sj), except azimuth (in degrees east of north) should be given instead of direction.  The azimuth will
be mapped into an angle based on the chosen map projection (OPT(Sj) leaves the directions
unchanged.)  Furthermore, the dimensions must be given in km instead of plot-distance units.  An exception occurs for
a linear projection in which we assume the dimensions are given in the same units as OPT(R).
.TP
OPT(Sk)
\fBk\fPustom symbol.  Append <name>/\fIsize\fP, and we will look for a definition file called
<name>.def in (1) the current directory or (2) in ~/.gmt or (3) in \fB$GMT_SHAREDIR\fP/custom.  The symbol as defined
in that file is of size 1.0 by default; the appended \fIsize\fP will scale symbol accordingly.
The symbols are plotted in the \fIx-y\fP plane.
Users may add their own custom *.def files; see CUSTOM SYMBOLS in the \fBpsxy\fP man page.
.TP
OPT(Sl)
\fBl\fPetter or text string (less than 64 characters).  Give size, and append /\fIstring\fP after the size.
Note that the size is only approximate; no individual scaling
is done for different characters.  Remember to escape special characters like *.  Optionally, you may append %\fIfont\fP
to select a particular font [Default is \fBANNOT_FONT_PRIMARY\fP].
.TP
OPT(Sm)
\fBm\fPath angle arc, optionally with one or two arrow heads [NOT IMPLEMENTED YET].  The \fIsize\fP is the radius of the arc.
Start and stop directions (in degrees counter-clockwise from horizontal) for arc
must be found in columns 3 and 4.  Use OPT(Smf) to add arrow head at first angle, OPT(Sml) for arrow head at last angle, and OPT(Smb) for both
[Default is no arrow heads].
.TP
OPT(Sn)
pe\fBn\fPtagon.  \fIsize\fP is diameter of circumscribing circle.
.TP
OPT(So)
c\fBo\fPlumn (3-D) extending from \fIbase\fP to z.  \fIsize\fP sets base width (Use \fIxsize/ysize\fP if not the same).  Append \fBu\fP if \fIsize\fP is in x-units
[Default is plot-distance units].  If no \fIsize\fP is given we expect both \fIxsize\fP and \fIysize\fP as two extra data columns.
By default, \fIbase\fP = 0.  Append b\fIbase\fP to change this value.  The facet colors will be modified to simulate shading.
Use OPT(SO) to disable such 3-D illumination.
.TP
OPT(Sp)
\fBp\fPoint.  No size needs to be specified (1 pixel is used).
.TP
OPT(Sq)
\fBq\fPuoted line, i.e., lines with annotations such as contours.
It is assumed that each individual line has a constant \fIz\fP level (i.e., each line must lie in the \fIx-y\fP plane).
Append [\fBd|f|n|l|x\fP]\fIinfo\fP[:\fIlabelinfo\fP].
#include "explain_contlabel.txt"
.sp
.RS
The optional \fIlabelinfo\fP controls the specifics of the label formatting and consists of a concatenated string
made up of any of the following control arguments:
.RE
#include "explain_labelinfo.txt"
.TP
OPT(Sr)
\fBr\fPectangle.  No size needs to be specified, but the x- and y-dimensions must be found in columns
4 and 5.
.TP
OPT(Ss)
\fBs\fPquare.  \fIsize\fP is diameter of circumscribing circle.
.TP
OPT(St)
\fBt\fPriangle.  \fIsize\fP is diameter of circumscribing circle.
.TP
OPT(Su)
c\fBu\fPbe (3-D).  \fIsize\fP sets length of all sides. Append \fBu\fP if \fIsize\fP
is in x-units [Default is plot-distance units].  The facet colors will be modified to simulate shading.
Use OPT(SU) to disable such 3-D illumination.
.TP
OPT(Sv)
\fBv\fPector.  Direction and length must be found in columns 4 and 5.
\fIsize\fP, if present, will be interpreted as \fIarrowwidth/headlength/headwidth\fP
[Default unit is PARAMS_SI (or PARAMS_US)].
By default arrow attributes remains invariant to the length
of the arrow.  To have the size of the vector scale down with decreasing size,
append \fBn\fP\fInorm\fP, where vectors shorter than \fInorm\fP will have their
attributes scaled by length/\fInorm\fP.
To center vector on balance point, use OPT(Svb); to align point with the vector head,
use OPT(Svh); to align point with the vector tail, use OPT(Svt) [Default].
To give the head point's \fIx, y, z\fP coordinates\"'
instead of direction and length, use OPT(Svs).  Upper case \fBB, H, T, S\fP will draw a double-headed vector [Default is single head].
.TP
OPT(SV)
Same as OPT(Sv), except azimuth should be given instead of direction.  The azimuth will
be mapped into an angle based on the chosen map projection (OPT(Sv) leaves the directions
unchanged.)
.TP
OPT(Sw)
pie \fBw\fPedge.  Start and stop directions (in degrees counter-clockwise from horizontal) for pie slice
must be found in columns 4 and 5.
.TP
OPT(SW)
Same as OPT(Sw), except azimuths (in degrees east of north) should be given instead of the two directions.  The azimuths will
be mapped into angles based on the chosen map projection (OPT(Sw) leaves the directions unchanged.)
.TP
OPT(Sx)
cross (x).  \fIsize\fP is diameter of circumscribing circle.
.br
.TP
OPT(Sy)
y-dash (|).  \fIsize\fP is the length of a short horizontal (y-dir) line segment.
.TP
OPT(Sz)
zdash.  \fIsize\fP is the length of a short vertical (z-dir) line segment.
#include "explain_-U.txt"
#include "explain_-V.txt"
.TP
OPT(W)
Set pen attributes for lines or the outline of symbols [Defaults: width = 1, color = black, texture = solid].
A leading \fB+\fP will use the lookup color (via OPT(C)) for both symbol fill and outline pen color, while a leading
\fB-\fP will set outline pen color and turn off symbol fill.
(See SPECIFYING PENS below).
#include "explain_-XY.txt"
.TP
OPT(Z)
For 3-D projections:  Sets the z-level of the basemap [lower end of z-range].
#include "explain_-t.txt"
#include "explain_-bi.txt"
[Default is the required number of columns given the chosen settings].
#include "explain_-c.txt"
#include "explain_-f.txt"
#include "explain_-g.txt"
The OPT(g) option is ignored if OPT(S) is set.
.TP
OPT(m)
Multiple segment file.  Segments are separated by a record whose first character is \fIflag\fP
[Default is '>']. On these segment header records one or more of the following options can be added:
.br
OPT(G)\fIfill\fP Use the new \fIfill\fP and turn filling on
.br
OPT(G-) Turn filling off
.br
OPT(G+) Revert to default fill (none if not set on command line)
.br
OPT(W)\fIpen\fP Use the new \fIpen\fP and turn outline on
.br
OPT(W-) Turn outline off
.br
OPT(W+) Revert to default pen (none if not set on command line)
.br
OPT(Z)\fIzval\fP Obtain fill via cpt lookup using z-value \fIzval\fP
.br
OPT(ZNaN) Get the NaN color from the cpt file
.TP
#include "explain_pen.txt"
#include "explain_fill.txt"
#include "explain_color.txt"
.SH EXAMPLES
To plot blue columns (width = LEN_1 cm) at the positions listed in the file heights.xyz on a
3-D projection of the space (0\-10), (0\-10), (0\-100),  with tickmarks every 2, 2, and 10,
viewing it from the southeast at 30 degree elevation, use:
.br
.sp
\fBpsxyz\fP heights.xyz OPT(R)0/10/0/10/0/100 OPT_1
OPT(G)blue OPT(B)2:XLABEL:/2:YLABEL:/10:ZLABEL::."3-D PLOT":15 OPT(E)135/30 OPT(Uc) OPT(W) OPT(P) > heights.ps
.SH BUGS
No hidden line removal is employed for polygons and lines.  Symbols, however, are first sorted
according to their distance from the viewpoint so that nearby symbols will overprint more distant
ones should they project to the same x,y position.
.br
\fBpsxyz\fP cannot handle filling of polygons that contain the south or north pole.  For such a polygon,
make a copy and split it into two and make each explicitly contain the polar point.  The two polygons
will combine to give the desired effect when filled; to draw outline use the original polygon.
.br
The OPT(N) option does not adjust the BoundingBox information so you may
have to post-process the \fIPostScript\fP output with \fBps2raster -A\fP to obtain
the correct BoundingBox.
.SH "SEE ALSO"
.IR GMT (1),
.IR gmtcolors (5),
.IR psbasemap (1),
.IR psxy (1)
