<HTML>
<!--    $Id: gmt5.html,v 1.9 2010-10-31 22:54:24 guru Exp $      -->
<HEAD>
<TITLE>GMT 5 Information</TITLE>
<BODY bgcolor="#ffffff">
<CENTER><H2>GMT 5 Information</H2></CENTER>
<CENTER><H3>Updated November 1, 2010</H3></CENTER>
<P>
<H3>GMT 5 Overview</H3>

GMT 5 is the next-generation version of GMT, the Generic Mapping Tools.  It is currently still in
development but stable enough that some users and developers may wish to join in testing and influencing
the direction we are moving in.  We anticipate GMT 5 will remain in this phase (alpha) until early
2011 when we expect to release a formal GMT 5.0.0beta release (with tar balls and Windows installers).
The first stable release GMT 5.0.0 may appear later in 2011.
<H3>What it means for users</H3>
For regular users, GMT 5 will not seem too different from GMT 4.  While there have been some minor
syntax changes, including elimination of the <B>-m</B> (or <B>-M</B> as some of you still are using) option, and
a renaming of several of the GMT defaults parameters, we also allow for a compatibility-mode
compilation that will let most GMT 4-style scripts run without problems.  In fact, most users will
simply notice that there are a few more tools and a few more options, as well as some significant
system-level changes.  The highlights of major features are:
<UL>
	<LI>GMT now has a way of dealing with GIS aspatial data, such as produced by ogr2ogr -f"GMT" from
		shapefiles and other GIS formats.  This format was specifically developed for GMT and referred
		to as the OGR/GMT format (See Appendix Q).  The metadata in this format can be used to set certain program arguments,
		such as symbol sizes or labels. The program gmtconvert can also covert plain GMT tables into
		the OGR/GMT format that ogr2ogr may translate into shapefiles and other GIS formats.
		Furthermore, the ESRI Arc/Info ASCII Grid Interchange format is now a recognized grid format;
		you no longer have to use grd2xyz/xyz2grd to handle such files.
	<LI>All GMT programs that read data tables can control which data columns should be read and in what order
		via the new <B>-i</B><I>columns</I> option.  E.g., use psxy -i5-7,2 ... to read columns 5, 6, 7 and 2
		in that order (so cols 5 and 6 becomes x,y, etc.).  This eliminates the need to use external tools
		like cut and awk to do this, which are not good solutions when your file has multiple segment headers
		and comments that you wish to preserve.
	<LI>All GMT programs that write data tables can control which data columns should be written and in what order
		via the new <B>-o</B><I>columns</I> option.  E.g., use blockmean -o2,1 ... to write columns 2 and 1
		in that order (i.e. output z and y only).  This eliminates the need to use external tools
		like cut and awk to do this, which are not good solutions when your file has multiple segment headers
		and comments that you wish to preserve.
	<LI>All GMT programs that read data tables can control how records with NaNs are handled with a
		new <B>-s</B> option.
	<LI>GMT now has new capabilities for handling PDF transparency.
		All color or fill specifications in GMT (including fonts and CPT tables) may append @<I>transparency</I>
		to change the PDF transparency level for that item [in 0-100%].  In addition, all plot programs can take
		a new <B>-t</B> option to modify the PDF transparency level for the entire overlay.
		However, as <I>PostScript</I> has no provision for transparency you can only see these effects if
		you convert it to PDF using Adobe Distiller.  To date, none of the GhostScript products has
		implemented this <I>PostScript</I> extension (this may of course change in the future).
	<LI>Our macro language for custom plot symbols (to use with psxy and psxyz) has been extended to
		allow for multi-parameter symbols, including full support for conditional, nested tests (See Appendix N).
	<LI>All GMT programs that process table data can handle multi-segment files without any special options.
		[In the past this required <B>-m</B> and many programs did not even have the option].
	<LI>All GMT plot programs that produce 2-D illustrations now take a new and optional <B>-p</B> option for perspective
		view.  This replaces the old way of using <B>-E</B><I>az/el</I> that was only available to some programs.
	<LI>All text can now optionally be filled with patterns and/or drawn with outline pens by appending =<I>pen</I>
		to the font color [In GMT 4, only pstext could draw an outline pen, but fill could only be solid colors].
	<LI>A new GMT defaults setting (MAP_ANNOT_ORTHO) allows Cartesian map frames to have annotations either parallel
		or orthogonal to each axes, controlled separately.
	<LI>There will be some new supplements: <B>potential</B> for gravity and magnetics calculations,
		<B>isostasy</B> for plate flexure calculations, and hopefully <B>spharmonics</B> for converting between
		global grids and spherical harmonics coefficients.  This is all work in progress; ideas are welcome.
</UL>
In addition, many programs have been given new options and you should check with the usage and man pages to learn
the details.  Finally, several new tools have been added; see Chapter 1 in the documentation for all the details.
<H3>What it means for developers</H3>
The big news is for developers who wish to leverage GMT in their own applications.  We have completely revamped
the code base so that high-level GMT functionality is now accessible via GMT "modules".  These are high-level
functions named after their corresponding programs (.e.g., GMT_grdimage) that contains all of the functionality
of that program within the function.  While currently callable from C/C++ only, we have built several of the
Matlab interface modules as well and will soon start on the Python and Fortran versions.  Developers should consult the new
GMT API Documentation for more details, and look at the testgmt5.c and pslegend_func.c codes.<BR>
	We have also redesigned the <I>PostScript</I> plotting library pslib; it is now referred to as PSL and
has seen much simplification and under-the-hood improvements.  All functions have been renamed so those who
have used PSL directly in the past will need to consult the updated documentation.

<H3>Who should consider installing GMT 5?</H3>
While GMT 5 correctly processes our 30 examples, our 86 test scripts, and 137 figure scripts for the documentation,
we still consider it unstable and even some simple things not exercised by these examples and scripts may cause
crashes.  Thus, you cannot count on GMT 5 for day-to-day work.  Still, there are several groups of people we wish to get involved:
<OL>
	<LI>We need volunteers curious about GMT 5 and who
		wish to get a head-start on this new version.  After installing, you should read Chapter 1 to see what the changes
		are, and then try to use it in your work.  When you run into a bug, please provide a short script, ideally with data
		in it, that can reproduce the problem so we can quickly debug and fix it.  I.e., if you are able to get a crash with
		just a few data points, use this syntax (here for psxy):<BR>
			psxy -R -J ... etc << EOF<BR>
			1 2 3<BR>
			2 3 4<BR>
			EOF<BR>
	<LI>Users in specific disciplines who requires custom symbols that can be plotted by psxy can now design very complicated
		and multi-parameter symbols using our extended macro language.  See the expanded Appendix N for details.
		Natural candidates are meteorologists who need a myriad of symbols that often take many data columns, such
		as wind barbs.
	<LI>Matlab users who wish to explore the new Matlab interface and ideally help us expand it to all the GMT tools.
	<LI>Developers who either (a) have already used GMT from their applications either via system calls or direct function calls
		and (b) those who might consider using GMT as a library if it is easy to do are welcome to read our GMTAPI documentation.
		Since only the C/C++ interface to GMT has been completed we will focus on developers wishing to use that interface.
		Once it stabilizes we will begin on the Python interface and will then need additional help from Python experts.
		We have also written the API to allow calls from Fortran but this requires Fortran users for testing.
</OL>
<H3>GMT 5 Installation</H3>
GMT 5 will only be available via cvs until it is officially released.  Because GMT 5 is expected to have
too many short-comings or bugs to be used for production, you will need to become familiar with the gmtswitch
script that lets you seamlessly switch between different GMT versions.
To install GMT 5, first follow the GMT 4 CVS installation on the GMT website.  Once that is done, continue with these instructions.
cd to your GMTdev directory (where you have your GMT 4 cvs tree) and run<P>
	cvs checkout -d GMT5 -r GMT5_branch GMT<P>
You will then get the GMT 5 branch installed in a new GMT5 directory.  Like for GMT 4 cvs you may need to
make a few changes to the guru/gmtguru.macros file and to copy over the latest coastlines, e.g.,<P>
make get_coast get_high get_full<P>
You can then issue make install.  To build everything, including the documentation, you must make sure you have the Latex and other
packages.  Once you add the full path to the GMT5 directory to your
~/.gmtversions file you can use gmtswitch to go between versions.<BR>
Windows users capable of using cvs and compiling GMT from source may use the gmtinstall.bat and gmtsuppl.bat scripts
to build GMT executables.  They will also need to manage their PATH separately.  To simplify this installation we provide
precompiled netCDF DLL/Libs for both 32- and 64-bit systems <A HREF="ftp://ftp.soest.hawaii.edu/gmt/windows/netcdf-3.6.3_win.zip">here</A>.
However, before using the batch files successfully several files need to be generated. On *nix this is done by the configure script, but on
windows we currently have no way to do the same job. So in practice, to build the Windows version it is necessary to build it first with
Cygwin. This will hopefully change when we have a CMake build solution.
<H3>Your feedback</H3>
We would like to hear from you about all aspects of GMT 5.  Many things are not polished yet: Man pages may leave out descriptions of new
features, program usage messages may be inaccurate, and the main Cookbook and Tutorial has only been marginally updated.  Most of the
example scripts have been modified to reflect new syntax.  So anything from noticing typos to finding bugs will be appreciated.
<P>
Sincerely, the GMT Team (Wessel, Smith, Scharroo, Luis)
</HEAD>
</HTML>
