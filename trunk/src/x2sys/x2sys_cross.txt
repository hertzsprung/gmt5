#include "common_options.txt"
.TH X2SYS_CROSS 1 MANDATE GMT_STRING "Generic Mapping Tools"
.SH NAME
\fBx2sys_cross\fP \- Find and compute Cross-Over Errors
.SH SYNOPSIS
\fBx2sys_cross\fP \fItrack(s)\fP OPT(T)\fITAG\fP 
[ OPT(Cc)|\fBf\fP|\fBg\fP|\fBe\fP ] [ OPT(F)\fIflags\fP ] [ OPT(Il)|\fBa\fP|\fBc\fP ] 
[ GMT_J_OPT ] [ OPT(K)\fIcombi.lis\fP] [ OPT(O) ] 
[ OPT(Nd)|\fBs\fP\fIunit\fP ] [ OPT(Qe)|\fBi\fP ] [ OPT(Sl)|\fBu\fP|\fBh\fP\fIspeed\fP ] 
[ GMT_V_OPT ][ OPT(Wt)|\fBd\fP|\fBn\fP\fIsize\fP ] [ OPT(2) ] [ GMT_bo_OPT ]
.SH DESCRIPTION
\fBx2sys_cross\fP is used to determine all intersections between ("external cross-overs") or within
("internal cross-overs") tracks, and report the time, position, distance along track,
heading and speed along each track segment, and the crossover and mean values for all observables.
The names of the tracks are passed on the command line.
By default, \fBx2sys_cross\fP will look for both external and internal cross-overs.  As an option,
you may choose to project all data using one of the map-projections prior to calculating the crossovers.
#include "explain_track.txt"
.TP
.B \-T
Sets the data set \fITAG\fP which, among other things, sets the definition file.
.SH OPTIONS
No space between the option flag and the associated arguments.
.TP
.B \-C
Select procedure for along-track distance calculation:
.br
\fBc\fP Cartesian distances [Default].
.br
\fBf\fP Flat Earth distances.
.br
\fBg\fP Great circle distances.
.br
\fBe\fP Geodesic distances on current \fBGMT\fP ellipsoid.
.TP
.B \-F
Sets which columns to use.  Give a comma-separated list of column names;
this list must include \fBx\fP, \fBy\fP or \fBlon\fP, \fBlat\fP and ideally
\fBtime\fP [Default selects all columns].  If \fBtime\fP is not selected
(or selected but the cruises do not have time information), then we output
proxy times (e.g., floating point record numbers) instead of \fBtime\fP.
.TP
.B \-I
Sets the interpolation mode. Choose among:
.br
\fBl\fP Linear interpolation [Default].
.br
\fBa\fP Akima spline interpolation.
.br
\fBc\fP Cubic spline interpolation.
.br
#include "explain_-J_short.txt"
.TP
.B \-K
Only process the pair-combinations found in the file \fIcombi.lis\fP
[Default process all possible combinations among the specified files].
.TP
.B \-L
Output results using the old XOVER format [Default is X2SYS format].
This option should only be used with *.gmt-formatted MGD77 files.
.TP
.B \-N
Append \fBd\fP for distance or \fBs\fP for speed, then give the desired \fIunit\fP as
\fBe\fP (meter or m/s), \fBk\fP (km or km/hr), \fBm\fP (miles or miles/hr), or
\fBn\fP (nautical miles or knots).  [Default is \fB\-Ndk \-Nse\fP (km and m/s)].
.TP
.B \-Q
Append \fBe\fP for external crossovers only, and \fBi\fP for internal
crossovers only [Default is all crossovers].
#include "explain_-Rgeo.txt"
.TP
.B \-S
Defines window of track speeds.  If speeds are outside this window we do not
calculate a crossover. Specify
.br
	\fB\-Sl\fP sets lower speed [Default is 0].
.br
	\fB\-Su\fP sets upper speed [Default is Infinity].
.br
	\fB\-Sh\fP does not limit the speed but sets a lower speed below which headings
will not be computed (i.e., set to NaN) [Default calculates headings regardless of speed].
.br
#include "explain_-V.txt"
.TP
.B \-W
Give \fBt\fP, \fBd\fP, or \fBn\fP and append the corresponding
maximum time gap [Infinity], or distance gap [Infinity] (both in user units) allowed between
the two points immediately on either side of a crossover.  If the gap exceeds this maximum
gap we skip the crossover calculation.  For \fB\-Wn\fP, give the maximum number of points on
either side to use in the interpolation [3].
.TP
.B \-2
Report the values of each track at the crossover [Default reports the crossover value and the mean value].
#include "explain_-bo.txt"
.SH REMARKS
The COEs found are printed out to standard output in ASCII format (unless
\fB\-bo\fP is set).  When ASCII is chosen, the output format depends on
whether or not old-style XOVER output (\fB\-L\fP) has been selected.
If ASCII, then the first record contains the file names and their start year,
whereas subsequent records have the data for each COE encountered.  The fields
written out are lat, lon, time along track #1 and #2,
x_gravity, x_magnetics, x_bathymetry, average gravity, average magnetics,
average bathymetry, heading along track #1 and #2. If
the default format is chosen then the same header record starts with "> " but
also ends with the times of the first record for each cruise, and
the output format for crossovers are first 10 columns that contain
x, y, time along track #1 and #2, distance along track #1 and #2,
heading along track #1 and #2, velocity along track #1 and #2, and
then pairs of (COE, average value) for each data type (or track-values #1 and #2; see \fB\-2\fP).
It is recommended that the Akima spline is used
instead of the natural cubic spline, since it is less sensitive to outliers
that tend to introduce wild oscillations in the interpolation.
.SH SIGN CONVENTION
If lega and legb are passed on the command line, then the COE value is Value
(lega) - Value (legb).
.SH PRECISION AND FORMAT
The output format of individual columns are controlled by \fBD_FORMAT\fP except for
geographic coordinates (\fBOUTPUT_DEGREE_FORMAT\fP) and absolute calendar time
(\fBOUTPUT_DATE_FORMAT\fP, \fBOUTPUT_CLOCK_FORMAT\fP).  Make sure these are set to
give you enough significant digits to achieve the desired precision.
.SH EXAMPLES
To compute all internal crossovers in the gmt-formatted file c2104.gmt, and
output in the old XOVER format, using the tag MGG, try
.br
.sp
\fBx2sys_cross\fP c2104.gmt \fB\-L \-T\fPMGG > c2104.d
.br
.sp
To find the crossover locations with bathymetry between the two MGD77
files A13232.mgd77 and A99938.mgd77, using the MGD77 tag, try
.br
.sp
\fBx2sys_cross\fP A13232.mgd77 A99938.mgd77 \fB\-Qe \-T\fPNGD77 \fB\-F\fPlon,lat,depth > crossovers.d
.SH "SEE ALSO"
.IR GMT (1),
.IR x2sys_init (1)
.IR x2sys_datalist (1)
.IR x2sys_get (1)
.IR x2sys_list (1)
.IR x2sys_put (1)

