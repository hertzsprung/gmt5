.TH PSXY GMTMANSECTION DATE VERSION VERSION
#define PARAMS_SI 0.075\fBc\fP/0.3\fBc\fP/0.25\fBc\fP
#define CAP_SI 0.25c
#define LEN_1 0.25
#define LEN_2 5
#define OPT_1	\fB\-Jm\fP5\fBc \-Sc\fP0.25\fBc\fP
#define PARAMS_US 0.03\fBi\fP/0.12\fBi\fP/0.1\fBi\fP
#define CAP_US 0.1i
#define OPT_2	\fB\-JX\fP6\fBi\fP
#define LEN_3 0.8
#define OPT_3	\fB\-Jm\fP0.15\fBi \-Sf\fP0.8\fBi\fP/0.1\fBilt\fP
#define G_OPT_SI 10\fBc\fP10
#define G_OPT_US 4\fBi\fP10
.SH NAME
psxy \- Plot lines, polygons, and symbols on maps
.SH SYNOPSIS
\fBpsxy\fP \fIfiles\fP \fB\-J\fP\fIparameters\fP \fB\-R\fP\fIwest/east/south/north\fP[\fBr\fP] 
[ \fB\-A\fP ] [ \fB\-B\fP\fItickinfo\fP ] [ \fB\-C\fP\fIcptfile\fP ] [ \fB\-D\fP\fIdx/dy\fP ] [ \fB\-E\fP[\fBx|y|X|Y\fP][\fIcap\fP][\fP/pen\fP] ] 
[ \fB\-G\fP\fIfill\fP ] [ \fB\-H\fP[\fInrec\fP] ] [ \fB\-K\fP ] [ \fB\-L\fP ] 
[ \fB\-N\fP ] [ \fB\-M\fP[\fIflag\fP] ] [ \fB\-O\fP ] [ \fB\-P\fP ] [ \fB\-S\fP[\fIsymbol\fP][\fIsize\fP] ] [ \fB\-U\fP[\fI/dx/dy/\fP][\fIlabel\fP] ] 
[ \fB\-V\fP ] [ \fB\-W\fP[\fIpen\fP] ] 
[ \fB\-X\fP\fIx-shift\fP ] [ \fB\-Y\fP\fIy-shift\fP ] [ \fB\-:\fP ] [ \fB\-c\fP\fIcopies\fP ] [ \fB\-bi\fP[\fBs\fP][\fIn\fP] ] [ \fB\-f\fP[\fBi|o\fP]\fP\fIcolinfo\fP ]
.SH DESCRIPTION
\fBpsxy\fP reads (x,y) pairs from \fIfiles\fP [or standard input] and
generates \fIPostScript\fP code that will plot lines, polygons, or symbols at those locations on a map.
If a symbol is selected and no symbol size given, then \fBpsxy\fP will interpret the third column of the
input data as symbol size.  Symbols whose size is <= 0 are skipped.  If no symbols are specified then the symbol code (see \fB\-S\fP below)
must be present as last column in the input.  Multiple segment files may be plotted using the \fB\-M\fP option.
If \fB\-S\fP is not selected, a line connecting the data points will be drawn instead.  To 
explicitly close polygons, use \fB\-L\fP.  Select a shade with \fB\-G\fP.  If \fB\-G\fP is set, \fB\-W\fP
will control whether the polygon outline is drawn or not.  If a symbol is selected, \fB\-G\fP and
\fB\-W\fP determines the fill color and outline/no outline, respectively.
The \fIPostScript\fP code is written to standard output. 
.TP
\fIfiles\fP
List one or more file-names. If no files are given, \fBpsxy\fP will read standard input.
#include "explain_-J_short.txt"
#include "explain_-R.txt"
.SH OPTIONS
No space between the option flag and the associated arguments.
.TP
.B \-A
Suppress drawing line segments as great circle Arcs.  [Default draws great circle arcs].
#include "explain_-B_short.txt"
.TP
.B \-C
Give a color palette file.  When used with \fB\-S\fP, lets symbol fill color be determined by the z-value in the
third column.  Additional fields are
shifted over by one column (optional size would be 4th rather than 3rd field, etc.).
If \fB\-S\fP is not set, \fBpsxy\fP expects the user to supply a multisegment line or polygon file
(requires \fB\-M\fP) and will look for \fB\-Z\fP\fIval\fP strings in each multisegment header.  The \fIval\fP
will control the color of the line or polygon (use \fB\-L\fP) via the cpt file.
.TP
.B \-D
Offset the plot symbol locations by the given amounts \fIdx/dy\fP [Default is no offset].  Only applies to symbols.
.TP
.B \-E
Draw error bars.  Append \fBx\fP and/or \fBy\fP to indicate which bars you want to draw (Default is both x and y).  The x and/or
y errors must be stored in the columns after the (x,y) pair [or (x,y,size) triplet].  The
\fIcap\fP parameter indicates the length of the end-cap on the error bars [CAP_SI (or CAP_US)].  Pen
attributes for error bars may also be set.  [Defaults: width = 1, color = 0/0/0, texture = solid].  If upper case
\fBX\fP and/or \fBY\fP is used we will instead draw "box-and-whisker" (or "stem-and-leaf") symbols.  The x (or y)
coordinate is then taken as the median value, and 4 more columns are expected to contain the minimum (0% quartile), the 25%
quartile, the 75% quartile, and the maximum (100% quartile) values.  The 25-75% box may be filled by using \fB\-G\fP.
.TP
.B \-G
Select filling of polygons and symbols.
Append the shade (0\-255), color (r/g/b), or \fBP\fP|\fBp\fP\fIdpi\fP/\fIpattern\fP (polygons only) [Default is no fill].
Note when \fB\-M\fP is chosen, \fBpsxy\fP will search for \fB\-G\fP and \fB\-W\fP strings in all the subheaders and let any found values over-ride the command line settings.
#include "explain_-H.txt"
#include "explain_-K.txt"
.TP
.B \-L
Force closed polygons: connect the endpoints of the line-segment(s) and draw polygons.
.TP
.B \-M
Multiple segment file.  Segments are separated by a record whose first character is \fIflag\fP.
[Default is '>'].
.TP
.B \-N
Do NOT skip symbols that fall outside map border [Default plots points inside border only].  The
option does not apply to lines and polygons which are always clipped to the map region.
#include "explain_-O.txt"
#include "explain_-P.txt"
.TP
.B \-S
Plot symbols.  If present, size is symbol size in the
unit set in \.gmtdefaults4 (unless c, i, m, or p is
appended).  If the symbol code (see below) is not given
it will be read from the last column in the input data.
Cannot be used in conjunction with \fB\-b\fP.  Optionally, append
c, i, m, p to indicate that the size information in the
input data is in units of cm, inch, meter, or point,
respectively. [Default is MEASURE_UNIT].
.br
The uppercase symbols \fBA\fP, \fBC\fP, \fBD\fP, \fBH\fP, \fBI\fP, \fBN\fP, \fBS\fP, \fBT\fP are normalized
to have the same area as a circle with diameter \fIsize\fP, while
the corresponding lowercase symbols all are circumscribed
by the circle.  Choose between these symbol codes:
.TP
.B \-S-
x-dash.  \fIsize\fP is the length of a short horizontal line segment.
.TP
.B \-Sa
st\fBa\fPr.  \fIsize\fP is diameter of circumscribing circle.
.TP
.B \-Sb
\fBb\fPar extending from \fIbase\fP to y.  \fIsize\fP is bar width. Append \fBu\fP
if \fIsize\fP is in x-units [Default is plot-distance units]. By default,
\fIbase\fP = 0.  Append \fBb\fP\fIbase\fP to change this value.  
.TP
.B \-Sc
\fBc\fPircle.  \fIsize\fP is diameter of circle.
.TP
.B \-Sd
\fBd\fPiamond.  \fIsize\fP is diameter of circumscribing circle.
.TP
.B \-Se
\fBe\fPllipse.  Direction (in degrees counter-clockwise from horizontal), major_axis, and minor_axis must be found in columns 3, 4, and 5.
.TP
.B \-SE
Same as \fB\-Se\fP, except azimuth (in degrees east of north) should be given instead of direction.  The azimuth will
be mapped into an angle based on the chosen map projection (\fB\-Se\fP leaves the directions
unchanged.)  Furthermore, the axes lengths must be given in km instead of plot-distance units.
.TP
.B \-Sf
\fBf\fPront.  \fB\-Sf\fP\fIgap/size\fP[\fIdir\fP][\fItype\fP][:\fIoffset\fP].  Supply distance gap between symbols and symbol size.
If \fIgap\fP is negative, it is interpreted to mean the number of symbols along the front instead.  Append \fIdir\fP to plot symbols
on the \fBl\fPeft or \fBr\fPight side of the front [Default is centered].  Append \fItype\fP to specify which symbol
to plot: \fBb\fPox, \fBc\fPircle, \fBf\fPault, \fBs\fPlip, or \fBt\fPriangle.  [Default is fault].
Slip means left-lateral or right-lateral strike-slip arrows (centered is not an option).  Append :\fIoffset\fP to offset
the first symbol from the beginning of the front by that amount [Default is 0].
.TP
.B \-Sh
\fBh\fPexagon.  \fIsize\fP is diameter of circumscribing circle.
.TP
.B \-Si
\fBi\fPnverted triangle.  \fIsize\fP is diameter of circumscribing circle.
.TP
.B \-Sk
\fBk\fPustom symbol.  Append <name>/\fIsize\fP, and we will look for a definition file called
<name>.def in (1) the current directory or (2) in $GMTHOME/share/custom.  The symbol as defined
in that file is of size 1.0 by default; the appended \fIsize\fP will scale symbol accordingly.
Users may add their own custom *.def files; see CUSTOM SYMBOLS below.
.TP
.B \-Sl
\fBl\fPetter or text string (less than 64 characters).  Give size, and append /\fIstring\fP after the size.  Note that
the size is only approximate; no individual scaling
is done for different characters.  Remember to escape special characters like *.  Optionally, you may append %\fIfont\fP
to select a particular font [Default is ANNOT_FONT].
.TP
.B \-Sg
octa\fBg\fPon.  \fIsize\fP is diameter of circumscribing circle.
.TP
.B \-Sn
pe\fBn\fPtagon.  \fIsize\fP is diameter of circumscribing circle.
.TP
.B \-Sp
\fBp\fPoint.  No size needs to be specified (1 pixel is used).
.TP
.B \-Sq
.TP
\fBq\fPuoted line, i.e., lines with annotations such as contours.  Append [\fBd|n|l|x\fP]\fIinfo\fP[:\fIlabelinfo\fP].
The required argument controls the placement of labels along the lines.  Choose among four controlling mechanisms:
.br
[\fBd\fP]\fIdist\fP[c|i|m|p][/\fIwidth\fP] Give distance between successive labels in your measurement
unit, and optionally append number of points used to calculate a smooth label angle [Default is
G_OPT_SI or G_OPT_US].
.br
\fBl|L\fP\fIline1\fP[,\fIline2\fP,...] Give \fIstart\fP and \fIstop\fP coordinates for one or
more comma-separated straight line segments.  Labels will be placed where these lines intersect the
data lines.  The format of each \fIline\fP specification is \fIstart/stop\fP, where \fIstart\fP and \fIstop\fP
are either a specified point \fIlon/lat\fP or a 2-character key that uses the justification
format employed in \fBpstext\fP to indicate a point on the map, given as [LCR][BMT].
Upper case \fBL\fP will interpolate the lines using great-circle resampling [Default is straight line].
.br
\fBn\fP\fIn_cont\fP specifies the number of equidistant labels per contour line [1].
Upper case \fBN\fP starts labeling exactly at the start of the line [Default centers them along the line].
\fBN\fP-1 places one justified label at start, while \fBN\fP+1 places one justified label at the end of the segment.
.br
\fB\-Gx|X\fP\fIxfile.d\fP reads the multi-segment file \fIxfile.d\fP and places labels at the intersections
between the data lines and the lines in\fIxfile.d\fP.  Upper case \fB\X\fP will resample the lines first along
great-circle arcs.
.br
The optional \fIlabelinfo\fP controls the specifics of the label formatting and consists of a concatenated string
made up of any of the following control arguments:
#include "explain_labelinfo.txt"
.br
\fB+l\fP\fIlabel\fP sets the label text.  If "h" we take the label from the current multisegment header (first looking
for \fB\-\fPlabel\fP option, if not the first word after segment flag). If "d" we take the distance along the line
as the label.
.B \-Sr
\fBr\fPectangle.  No size needs to be specified, but the x- and y-dimensions must be found in columns 3 and 4.
.TP
.B \-Ss
\fBs\fPquare.  \fIsize\fP is diameter of circumscribing circle.
.TP
.B \-St
\fBt\fPriangle.  \fIsize\fP is diameter of circumscribing circle.
.TP
.B \-Sv
\fBv\fPector.  Direction (in degrees counter-clockwise from horizontal) and length must be found in columns 3 and 4.  \fIsize\fP,
if present, will be interpreted as arrowwidth/headlength/headwidth [Default is PARAMS_SI (or PARAMS_US)].
By default arrow attributes remains invariant to the length
of the arrow.  To have the size of the vector scale down with decreasing size,
append \fBn\fP\fInorm\fP, where vectors shorter than \fInorm\fP will have their
attributes scaled by length/\fInorm\fP.  To center vector on balance point, use \fB\-Svb\fP; to align point with the vector head,
use \fB\-Svh\fP; to align point with the vector tail, use \fB\-Svt\fP [Default].  To give the head point's coordinates\"'
instead of direction and length, use \fB\-Svs\fP.  Upper case \fBB, H, T, S\fP will draw a double-headed vector [Default is single head].
.TP
.B \-SV
Same as \fB\-Sv\fP, except azimuth (in degrees east of north) should be given instead of direction.  The azimuth will
be mapped into an angle based on the chosen map projection (\fB\-Sv\fP leaves the directions
unchanged.)
.TP
.B \-Sw
pie \fBw\fPedge.  Start and stop directions (in degrees counter-clockwise from horizontal) for pie slice
must be found in columns 3 and 4.
.TP
.B \-Sx
cross.  \fIsize\fP is diameter of circumscribing circle.
.TP
.B \-Sy
y-dash.  \fIsize\fP is the length of a short vertical line segment.
#include "explain_-U.txt"
#include "explain_-V.txt"
.TP
.B \-W
Set pen attributes.  [Defaults: width = 1, color = 0/0/0, texture = solid].
Implicitly draws the outline of symbols with selected pen. 
#include "explain_-XY.txt"
#include "explain_-t.txt"
#include "explain_-i_binary.txt"
#include "explain_-n.txt"
[Default is the required number of columns given the chosen settings].
#include "explain_-c.txt"
#include "explain_-f.txt"
.SH EXAMPLES
To plot solid red circles (diameter = LEN_1 cm) at the positions listed in the file DSDP.xy on a
Mercator map at LEN_2 cm/degree of the area 150E to 154E, 18N to 23N, with tickmarks every 1 degree
and gridlines every 15 minutes, use
.br
.sp
\fBpsxy\fP DSDP.xy \fB\-R\fP150/154/18/23 OPT_1 \fB\-G\fP255/0/0 \fB\-B\fP1\fBg\fP15\fBm\fP | lpr
.br
.sp
To plot the xyz values in the file quakes.xyzm as circles with size given by the magnitude in the
4th column and color based on the depth in the third using the color palette cpt on a linear map, use
.br
.sp
\fBpsxy\fP quakes.xyzm \fB\-R\fP0/1000/0/1000 OPT_2 \fB\-Sc\fP \fB\-C\fPcpt \fB\-B\fP200 > map.ps
.br
.sp
To plot the file trench.xy on a Mercator map, with white triangles with sides LEN_1 inch on the left
side of the line, spaced every LEN_3 inch, use
.br
.sp
\fBpsxy\fP trench.xy \fB\-R\fP150/200/20/50 OPT_3 \fB\-G\fP255 \fB\-W \-B\fP10 | lpr
br
.sp
To plot the data in the file misc.d as symbols determined by the code in the last column, and with size given
by the magnitude in the 4th column, and color based on the third column via the color palette cpt on a linear map, use
.br
.sp
\fBpsxy\fP misc.d \fB\-R\fP0/100/-50/100 OPT_2 \fB\-S\fP \fB\-C\fPcpt \fB\-B\fP20 > t.ps
.SH BUGS
The \fB\-N\fP option does not adjust the BoundingBox information so you may
have to post-process the PostScript outout with epstool or ps2epsi to obtain
a correct BoundingBox.
.br
\fBpsxy\fP cannot handle filling of polygons that contain the south or north pole.  For such a polygon,
make a copy and split it into two and make each explicitly contain the polar point.  The two polygons
will combine to give the desired effect when filled; to draw outline use the original polygon.
.SH CUSTOM SYMBOLS
\fBpsxy\fP and \fBpsxyz\fP allows users to define and plot their own custom symbols.
This is done by encoding the symbol using a simple plotting code described below.  Put
all the plotting codes for your new symbol in a file whose extension must be .def; you may then address
the symbol without giving the extension (e.g., the symbol file tsunami.def is used by specifying \fB\-Sk\fP\fItsunami/size\fP.
The definition file can contain any number of plot code records, as well as blank lines and comment lines (starting with #).
\fBpsxy\fP and \fBpsxyz\fP will look for the definition files in (1) the current directory and  (2) the $GMTHOME/share/custom,
in that order.
Freeform polygons (made up of straight line segments and arcs of circles) can be designed - these polygons can be
painted and filled with a pattern.  Other standard geometric symbols can also be used.  With the exception of the circle,
these can only be painted, not filled with a pattern (use the freeform polygons to include a triangle that can be filled
with a pattern).  Generate freeform polygons by starting with an anchor point:
.br
	\fIx0	y0\fP	\fBM\fP  [ \fB\-W\fP\fIpen\fP ] [ \fB\-G\fP\fIfill\fP ]
.br
and draw a straight line from the current point to the next point with
.br
	\fIx	y\fP	\fBD\fP
.br
or add an arc by using
.br
	\fIxc	yc	r	dir1	dir2\fP	\fBA\fP
.br
When a record other than the \fBD\fP or \fBA\fP is encountered, the polygon is closed and considered complete.
The optional pen and fill setting hardwires particular values for this feature.  If not present the polygon's\"'
characteristics are determined by the command line settings for pen and fill.  To deactivate fill or outline
for any given polygon, give \fB\-G\-\fP or \fB\-W\-\fP.  To add other geometric shapes
to your custom symbol, add any number of the following plot code records:
.sp
.br
	star: \fIx	y	size\fP	\fBa\fP  [ \fB\-W\fP\fIpen\fP ] [ \fB\-G\fP\fIfill\fP ]
.br
	circle: \fIx	y	size\fP	\fBc\fP  [ \fB\-W\fP\fIpen\fP ] [ \fB\-G\fP\fIfill\fP ]
.br
	cross: \fIx	y	size\fP	\fBx\fP  [ \fB\-W\fP\fIpen\fP ]
.br
	diamond: \fIx	y	size\fP	\fBd\fP  [ \fB\-W\fP\fIpen\fP ] [ \fB\-G\fP\fIfill\fP ]
.br
	ellipse: \fIx	y	dir	major	minor\fP	\fBe\fP  [ \fB\-W\fP\fIpen\fP ] [ \fB\-G\fP\fIfill\fP ]
.br
	hexagon: \fIx	y	size\fP	\fBh\fP  [ \fB\-W\fP\fIpen\fP ] [ \fB\-G\fP\fIfill\fP ]
.br
	invtriangle: \fIx	y	size\fP	\fBi\fP  [ \fB\-W\fP\fIpen\fP ] [ \fB\-G\fP\fIfill\fP ]
.br
	letter: \fIx	y	size	string\fP	\fBl\fP  [ \fB\-W\fP\fIpen\fP ] [ \fB\-G\fP\fIfill\fP ]
.br
	octagon: \fIx	y	size\fP	\fBg\fP  [ \fB\-W\fP\fIpen\fP ] [ \fB\-G\fP\fIfill\fP ]
.br
	pentagon: \fIx	y	size\fP	\fBn\fP  [ \fB\-W\fP\fIpen\fP ] [ \fB\-G\fP\fIfill\fP ]
.br
	rect: \fIx	y	xwidth	ywidth\fP	\fBr\fP  [ \fB\-W\fP\fIpen\fP ] [ \fB\-G\fP\fIfill\fP ]
.br
	square: \fIx	y	size\fP	\fBs\fP  [ \fB\-W\fP\fIpen\fP ] [ \fB\-G\fP\fIfill\fP ]
.br
	triangle: \fIx	y	size\fP	\fBt\fP  [ \fB\-W\fP\fIpen\fP ] [ \fB\-G\fP\fIfill\fP ]
.br
	wedge: \fIx	y	radius	dir1	dir2\fP	\fBw\fP  [ \fB\-W\fP\fIpen\fP ] [ \fB\-G\fP\fIfill\fP ]
.br
.sp
When designing your symbol, the \fIx, y\fP and other dimensions are relative to a symbol of size 1, and all the
dimensions will be scaled by the actual symbol size chosen at run-time.  To design a symbol, make a grid paper
with \fBpsbasemap \-R\fP-0.5/0.5/-0.5/0.5 \fB\-JX\fP4\fBi\fP \fB\-Ba\fP0.1\gBg\gP0.05 \fB\-P\fP > grid.ps and
draw your symbol, centering it on (0,0).  For examples of symbols, see the set supplied with GMT in $GMTHOME/share/custom.
.SH "SEE ALSO"
.IR gmt (GMTMANSECTION),
.IR psbasemap (GMTMANSECTION),
.IR psxyz (GMTMANSECTION)
