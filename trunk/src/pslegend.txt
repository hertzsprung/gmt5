#include "common_options.txt"
.TH PSLEGEND 1 MANDATE GMT_STRING "Generic Mapping Tools"
#define CLEARANCE 4BD(p)/4BD(p)
.SH NAME
pslegend \- To plot a map legend
.SH SYNOPSIS
BD(pslegend) [ IT(textfile) ] OPT(D)[BD(x)]IT(lon)/IT(lat)/IT(width)/IT(height)/IT(just) 
[ GMT_B_OPT ] [ OPT(C)IT(dx)/IT(dy) ] [ OPT(F) ] [ OPT(G)IT(fill) ] [ GMT_J_OPT ] 
[ GMT_K_OPT ] [ OPT(L)IT(spacing) ] [ GMT_O_OPT ] [ GMT_P_OPT ] 
[ GMT_Rgeo_OPT ] [ GMT_U_OPT ] [ GMT_V_OPT ] [ GMT_X_OPT ] [ GMT_Y_OPT ] 
[ GMT_c_OPT ] [ GMT_p_OPT ] [ GMT_t_OPT ]
.SH DESCRIPTION
BD(pslegend) will make legends that can be overlaid on maps.  It reads specific
legend-related information from an input file [or stdin].  Unless otherwise noted,
annotations will be made using the primary annotation font and size in effect
(i.e., FONT_ANNOT_PRIMARY)
#include "explain_commonitems.txt"
.SH REQUIRED ARGUMENTS
.SH OPTIONAL ARGUMENTS
.TP
IT(textfile)
This file contains instruction for the layout of items in the legend.  Each legend item is described by
a unique record.  All records begin with a unique character that is common to all records of the same
kind.  The order of the legend items is implied by the order of the records.  Ten different record types
are recognized, and the syntax for each of these records are presented below:
.sp
.RS
BD(#) IT(comment)
Records starting with # and blank lines are skipped.
.TP
BD(B) IT(cptname offset height) [ IT(optional arguments) ]
The BD(B) record will plot a horizontal color bar, BD(psscale)-style in the middle, starting at IT(offset) from
the left edge, and of the given IT(height).  You may add any additional BD(psscale) options from the list:
OPT(A) OPT(B) OPT(I) OPT(L) OPT(M) OPT(N) OPT(S) OPT(Z) and OPT(p).  See the BD(psscale) man page for details.
.TP
BD(C) IT(textcolor)
The BD(C) record specifies the color with which the remaining text is to be printed.
IT(textcolor) can be in the form IT(r/g/b), IT(c/m/y/k), or a named color.  Use BD(-) to reset to default color.
.TP
BD(D) IT(offset pen)
The BD(D) record results in a horizontal line with specified IT(pen) across the legend with one quarter of
the line spacing left blank above and below the line.  Two gaps of IT(offset) units are left blank between
the horizontal line and the left and right frame sides.  If no pen is given we use MAP_GRID_PEN_PRIMARY
.TP
BD(G) IT(gap)
The BD(G) record specifies a vertical gap of the given length. 
In addition to the standard units (BD(i), BD(c), BD(p)) you may use BD(l) for lines.
A negative IT(gap) will move the current line upwards (thus closing a gap).
.TP
BD(H) IT(fontsize)|BD(-) IT(font)|BD(-) header)
The BD(H) record plots a centered text string using the specified font parameters.
Use BD(-) to default to size and type of BD(FONT_TITLE).
.TP
BD(I) IT(imagefile width justification)
Place an EPS or Sun raster image in the legend justified relative to the current point.  The
image IT(width) determines the size of the image on the page.
.TP
BD(L) IT(fontsize)|BD(-) IT(font)|BD(-) justification label)
The BD(L) record plots a (L)eft, (C)entered, or (R)ight-justified text string within a column using
the specified font parameters.
Use BD(-) to default to the size and type of BD(FONT_LABEL).
.TP
BD(M) IT(slon)|BD(-) IT(slat length) BD(f)|BD(p) [ OPT(R)IT(w/e/s/n) OPT(J)IT(param) ]
Place a map scale in the legend.  Specify IT(slon slat), the point on the map where the scale applies (IT(slon)
is only meaningful for certain oblique projections.  If not needed, you must specify BD(-) instead),
IT(length), the length of the scale in km (append BD(m) or BD(n) for miles or nautical miles), and
BD(f) or BD(p) for fancy or plain scale.  If the OPT(R) OPT(J) supplied to BD(pslegend) is different than the
projection needed for the scale (or not given at all, i.e., with OPT(Dx)), supply the optional OPT(R) OPT(J) settings as well.  
Append BD(+l) to the IT(length) to
select the default label which equals the distance unit (km, miles, nautical miles) and is justified on top of the scale [t].
Change this by giving your own label (append BD(+l)IT(label)).  Change label justification with BD(+j)IT(justification)
(choose among l(eft), r(ight), t(op), and b(ottom)).  Apply BD(+u) to append the unit to all distance annotations along the scale. 
If you want to place a rectangle behind the scale, specify suitable BD(+p)IT(pen) and/or BD(+f)IT(fill) parameters.
All these )+)IT(modifiers) are appended to IT(length) to make a single string.
.TP
BD(N) IT(ncolumns)
Change the number of columns in the legend [1]. This only affects the printing of symbols (BD(S)) and 
labels (BD(L)).  The number of columns stay in effect until BD(N) is used again.
.TP
BD(S) IT(dx1 symbol size fill pen) [ IT(dx2 text) ]
Plots the selected symbol with specified size, fill, and outline (see BD(psxy)).
The symbol is centered at IT(dx1) from the left margin of the column,
with the optional explanatory IT(text) starting IT(dx2) from the margin, printed with BD(FONT_ANNOT_PRIMARY).
Use BD(-) if no IT(fill) or outline (IT(pen)) is required.
When plotting just a symbol, without text, IT(dx2) and IT(text) can be omitted.
Two BD(psxy) symbols require special attention: front (BD(f)) and vector (BD(v)).  You must prepend
the length of the desired item to the rest of the symbol argument; this will be used internally to set the
correct fault or vector length and will be stripped before passing the arguments to BD(psxy).
.TP
BD(T) IT(paragraph-text)
One or more of these BD(T) records with IT(paragraph-text) printed with BD(FONT_ANNOT_PRIMARY).
To specify special positioning and typesetting arrangements, or to enter a paragraph break, use the
optional BD(P) record.
.TP
BD(V) IT(offset pen)
The BD(V) record draws a vertical line between columns (if more than one) using the selected IT(pen)
IT(offset) is analogous to the offset for the BD(D) records but in the vertical direction.
.TP
BD(P) IT(paragraph-mode-header-for-pstext)
Start a new text paragraph by specifying all the parameters needed (see BD(pstext \-M) record description).  Note that
BD(pslegend) knows what all those values should be, so normally you can leave the entire record (after P) blank or
leave it out all together.
If you need to set at least one of the parameters directly, you must specify all and set the ones you want to leave
at their default value to BD(-).
.RE
.br
.TP
OPT(D)[BD(x)]IT(lon)/IT(lat)/IT(width)/IT(height)/IT(just)
Positions the legend and specifies its size.  The IT(just) is a 2-char justification string (see BD(pstext))
that relates the given position to a point on the rectangular legend box.  If you want to specify the position
in map plot units (i.e., inches or cm), use OPT(Dx); in that case the OPT(R) and OPT(J) are optional (provided
it is an overlay, i.e., we are using OPT(O)).
#include "explain_-B.txt"
.TP
OPT(C)IT(dx)/IT(dy)
Sets the clearance between the legend frame and the internal items [CLEARANCE].
.TP
OPT(F)
Draws a border around the legend using BD(MAP_FRAME_PEN).
.TP
OPT(G)IT(fill)
Select fill shade, color or pattern of the legend box [Default is no fill].
#include "explain_-J.txt"
#include "explain_-K.txt"
.TP
OPT(L)IT(spacing)
Sets the linespacing factor in units of the current annotation font size [1.1].
#include "explain_-O.txt"
#include "explain_-P.txt"
#include "explain_-R.txt"
#include "explain_-U.txt"
#include "explain_-V.txt"
#include "explain_-XY.txt"
#include "explain_-c.txt"
#include "explain_perspective.txt"
#include "explain_-t.txt"
#include "explain_help.txt"
.SH EXAMPLES
To add an example of a legend to a Mercator plot (map.ps) with the given specifications, use
.br
.sp
pslegend -R-10/10/-10/10 -JM6i -Gazure1 -Dx0.5i/0.5i/5i/3.3i/BL
-C0.1i/0.1i -L1.2 -F -B5f1 << EOF >> map.ps
.br
\# Legend test for pslegend
.br
\# G is vertical gap, V is vertical line, N sets # of columns, D draws horizontal line.
.br
\# H is header, L is label, S is symbol, T is paragraph text, M is map scale.
.br
\#
.br
G -0.1i
.br
H 24 Times-Roman My Map Legend
.br
D 0.2i 1p
.br
N 2
.br
V 0 1p
.br
S 0.1i c 0.15i p300/12 0.25p 0.3i This circle is hachured
.br
S 0.1i e 0.15i 255/255/0 0.25p 0.3i This ellipse is yellow
.br
S 0.1i w 0.15i 0/255/0 0.25p 0.3i This wedge is green
.br
S 0.1i f 0.25i/-1/0.075ilb 0/0/255 0.25p 0.3i This is a fault
.br
S 0.1i - 0.15i - 0.25tap 0.3i A contour
.br
S 0.1i v 0.25i/0.02i/0.06i/0.05i 255/0/255 0.25p 0.3i This is a vector
.br
S 0.1i i 0.15i 0/255/255 0.25p 0.3i This triangle is boring
.br
V 0 1p
.br
D 0.2i 1p
.br
N 1
.br
M 5 5 600+u f
.br
G 0.05i
.br
I SOEST_logo.ras 3i CT
.br
G 0.05i
.br
B colors.cpt 0.2i 0.2i
.br
G 0.05i
L 9 4 R Smith et al., @%5%J. Geophys. Res., 99@%%, 2000
.br
G 0.1i
.br
P
.br
T Let us just try some simple text that can go on a few lines.
.br
T There is no easy way to predetermine how many lines will be required,
.br
T so we may have to adjust the box height to get the right size box.
.br
EOF
.br
.SH WINDOWS REMARKS
Note that under Windows, the percent sign (%) is a variable indicator (like $ under Unix).
To indicate a plain percentage sign in a batch script you need to repeat it (%%);
hence the font switching mechanism (@%IT(font)% and @%%) may require twice the
number of percent signs.  This only applies to text inside a script or that otherwise
is processed by DOS.  Data files that are opened and read by BD(pslegend) do not need such duplication.
.SH "SEE ALSO"
.IR gmt (1),
.IR gmt.conf (5),
.IR gmtcolors (5),
.IR psbasemap (1),
.IR pstext (1),
.IR psxy (1)
