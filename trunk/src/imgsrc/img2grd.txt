#include "common_options.txt"
.TH IMG2GRD 1 MANDATE GMT_STRING "Generic Mapping Tools"
.SH NAME
img2grd \- Extract region of img in Mercator or geographic form 
.SH SYNOPSIS
\fBimg2grd\fP \fIimgfile\fP OPT(G)\fIgrdfile\fP GMT_Rgeo_OPT 
OPT(T)\fItype\fP  [ OPT(C) ] [ OPT(D)\fIminlat/maxlat\fP ] [ OPT(E) ] [ OPT(L) ] 
[ OPT(M) ] [ OPT(N)\fInavg\fP ] [ OPT(S)\fIscale\fP ] 
[ GMT_V_OPT ] [ OPT(W)\fImaxlon\fP ] [ OPT(m)\fIminutes\fP ]
.SH DESCRIPTION
\fBimg2grd\fP is a front-end to \fBimg2mercgrd\fP which reads an img format file and creates a grid file.
The OPT(M) option dictates whether or not the Spherical Mercator 
projection of the img file is preserved.
.TP
\fIimgfile\fP
An img format file such as the marine gravity or seafloor topography fields estimated from 
satellite altimeter data by Sandwell and Smith.  If the user has set an environment variable 
\fB$GMT_IMGDIR\fP, then \fBimg2mercgrd\fP will try to find \fIimgfile\fP in \fB$GMT_IMGDIR\fP; else it 
will try to open \fIimgfile\fP directly.
.TP
OPT(G)
\fIgrdfile\fP is the name of the output grid file.
#include "explain_-Rgeo.txt"
.TP
OPT(T)
\fItype\fP handles the encoding of constraint information.  \fItype\fP = 0 indicates that no 
such information is encoded in the img file (used for pre-1995 versions of the gravity data) 
and gets all data.  \fItype\fP > 0 indicates that constraint information is encoded (1995 and 
later (current) versions of the img files) so that one may produce a grid file as follows: 
OPT(T)\fI1\fP gets data values at all points, OPT(T)\fI2\fP gets data values at 
constrained points and NaN at interpolated points; OPT(T)\fI3\fP gets 1 at constrained 
points and 0 at interpolated points. 
.SH OPTIONS
.TP
OPT(C)
Set the x and y Mercator coordinates relative to projection center [Default is relative to
lower left corner of grid].  Requires OPT(M).
.TP
OPT(D)
Use the extended latitude range -80.738/+80.738.  Alternatively, append \fIminlat/maxlat\fP
as the latitude extent of the input img file.  [Default is -72.006/72.006].
.TP
OPT(E)
Can be used when OPT(M) is not set to force the final grid to have the exact same region
as requested with OPT(R).  By default, the final region is a direct projection of the
original Mercator region and will typically extend slightly beyond the requested latitude
range, and furthermore the grid increment in latitude does not match the longitude increment.
However, the extra resampling introduces small interpolation errors and should only
be used if the output grid must match the requested region and have x_inc = y_inc.  In
this case the region set by OPT(R) must be given in multiples of the increment (.e.g,
OPT(R)0/45/45/72).
.TP
OPT(L)
With no other arguments, list all *.img files found in the directory pointed to by
\fB$GMT_IMGDIR\fP, or the current directory if not defined.  Ignored if other options are
present on the command line.
.TP
OPT(M)
Output a Spherical Mercator grid [Default is a geographic lon/lat grid].
.TP
OPT(N)
Average the values in the input img pixels into \fInavg\fP by \fInavg\fP squares, and 
create one output pixel for each such square.  If used with OPT(T)\fI3\fP it will 
report an average constraint between 0 and 1.  If used with OPT(T)\fI2\fP the output 
will be average data value or NaN according to whether average constraint is > 0.5.  
\fInavg\fP must evenly divide into the dimensions of the imgfile in pixels.  
[Default \fI1\fP does no averaging].
.TP
OPT(S)
Multiply the img file values by \fIscale\fP before storing in grid file.  [Default is 1.0].  
(img topo files are stored in (corrected) meters; gravity files in mGal*10; vertical 
deflection files in microradians*10, vertical gravity gradient files in Eotvos*10.)
#include "explain_-V.txt"
Particularly recommended here, as it is helpful to see how the coordinates are adjusted.
.TP
OPT(m)
Indicate \fIminutes\fP as the width of an input img pixel in minutes of longitude.  
[Default is 2.0].
.TP
OPT(W)
Indicate \fImaxlon\fP as the maximum longitude extent of the input img file.  Versions 
since 1995 have had \fImaxlon\fP = 360.0, while some earlier files had \fImaxlon\fP = 
390.0.  [Default is 360.0].
.SH EXAMPLES
To extract data in the region OPT(R)-40/40/-70/-30 from \fIworld_grav.img.7.2\fP and preserve
the Mercator gridding:
.br
.sp
\fBimg2grd\fP world_grav.img.7.2 OPT(G)merc_grav.grd OPT(R)-40/40/-70/-30 OPT(M) OPT(T)1 OPT(V)
.br
.sp
Without the OPT(M) option the same command will yield a geographic grid.
.SH "SEE ALSO"
.IR GMT (1),
.IR img2mercgrd (1)
