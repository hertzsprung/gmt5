#include "common_options.txt"
.TH GRDROTATER 1 MANDATE GMT_STRING "Generic Mapping Tools"
.SH NAME
grdrotater \- Rotate a grid using a finite rotation
.SH SYNOPSIS
\fBgrdrotate\fP \fIingrdfile\fP OPT(G)\fIoutgrdfile\fP OPT(T)\fIplon\fP/\fIplat\fP/\fIomega\fP 
[ OPT(F)\fIpolygonfile\fP ] [ GMT_H_OPT ] [ OPT(N) ] 
[ OPT(Q)[\fBb\fP|\fBc\fP|\fBl\fP|\fBn\fP][[\fB/\fP]\fIthreshold\fP] ] [ GMT_Rgeo_OPT ] [ OPT(S) ]
[ GMT_V_OPT ] [ GMT_t_OPT ] [ GMT_b_OPT ] [ GMT_mo_OPT ]
.SH DESCRIPTION
\fBgrdrotater\fP reads a geographical grid and reconstructs it given
a total reconstruction rotation.  Optionally, the user may supply a clipping polygon
in multiple-segment format; then, only the part of the grid inside the polygon is used
to determine the return grid region.  The outline of the projected region is returned
on stdout.
.br
	No space between the option flag and the associated arguments.  Use upper case for the
option flags and lower case for modifiers.
.TP
\fIingrdfile\fP
Name of a grid file in geographical (lon, lat) coordinates.
.TP
OPT(G)
Name of output grid.  This is the grid with the data reconstructed according to the specified
rotation.
.TP
OPT(T)
Finite rotation.  Specify the longitude and latitude of the rotation pole and the opening
angle, all in degrees.
.SH OPTIONS
.TP
OPT(F)
Specify a multi-segment closed polygon file that describes the inside area of the grid
that should be projected [Default projects entire grid].
#include "explain_-H.txt"
.TP
OPT(N)
Do Not output the rotated polygon outline [Default will write it to stdout].
#include "explain_-Q.txt"
#include "explain_-Rgeo.txt"
.TP
OPT(S)
Skip the rotation of the grid, just rotate the polygon outline (requires OPT(F)).
#include "explain_-V.txt"
.TP
OPT(:)
Toggles between (longitude,latitude) and (latitude,longitude) input/output.  [Default is (longitude,latitude)].
#include "explain_-bi.txt"
[Default is 2 input columns].
#include "explain_-bo.txt"
[Default is same as input].
#include "explain_-m.txt"
.SH EXAMPLES
To rotate the data defined by grid topo.grd and the polygon outline clip_path.d, using a finite rotation
with pole at (135.5, -33.0) and a rotation angle of 37.3 degrees and bicubic interpolation, try
.br
.sp
\fBgrdrotater\fP topo.grd OPT(T)135.5/-33/37.3 OPT(V) OPT(F)clip_path.d OPT(G)rot_topo.grd > rot_clip_path.d
.br
.sp
To rotate the entire grid faa.grd using a finite rotation pole at (67:45W, 22:35S) and a rotation angle of 19.6
degrees using a bilinear interpolation, try
.br
.sp
\fBgrdrotater\fP faa.grd OPT(T)67:45W/22:35S/19.6 OPT(V) OPT(Q) OPT(G)rot_faa.grd > rot_faa_path.d
.br
.sp
To just see how the outline of the grid large.grd will plot after the same rotation, try
.br
.sp
\fBgrdrotater\fP large.grd OPT(T)67:45W/22:35S/19.6 OPT(V) OPT(S) | psxy OPT(Rg) OPT(JH)180/6i OPT(B)30 OPT(m) OPT(W)0.5\fBp\fP | gv -
.br
.sp
Let say you have rotated gridA.grd and gridB.grd, restricting each rotation to nodes inside polygons polyA.d and polyB.d, respectively,
using rotation A = (123W,22S,16,4) and rotation B = (108W, 16S, -14.5), yielding rotated grids rot_gridA.grd and rot_gridB.grd.
To determine the region of overlap between the rotated grids, we use grdmath:
.br
.sp
grdmath 1 rot_gridA.grd ISNAN SUB 1 rot_gridB.grd ISNAN SUB 2 EQ = overlap.grd
.br
.sp
The grid overlap.grd now has 1s in the regions of overlap and 0 elsewhere.  You can use it as a mask
or use grdcontour to extract a polygon (contour).
.SH "SEE ALSO"
.IR backtracker (1),
.IR hotspotter (1),
.IR originator (1)
.IR rotconverter (1)
